<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Martyn Brush, FGF Research" />
  <title>Margin Absorption Capacity (MAC) Framework: Detailed Methodology</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Margin Absorption Capacity (MAC) Framework: Detailed
Methodology</h1>
<p class="author">Martyn Brush, FGF Research</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a
href="#margin-absorption-capacity-mac-framework-detailed-methodology"
id="toc-margin-absorption-capacity-mac-framework-detailed-methodology">Margin
Absorption Capacity (MAC) Framework: Detailed Methodology</a>
<ul>
<li><a href="#table-of-contents" id="toc-table-of-contents">Table of
Contents</a></li>
<li><a href="#executive-summary" id="toc-executive-summary">1. Executive
Summary</a>
<ul>
<li><a href="#core-equation" id="toc-core-equation">Core
Equation</a></li>
<li><a href="#key-results" id="toc-key-results">Key Results</a></li>
</ul></li>
<li><a href="#theoretical-foundation" id="toc-theoretical-foundation">2.
Theoretical Foundation</a>
<ul>
<li><a href="#the-absorption-capacity-concept"
id="toc-the-absorption-capacity-concept">2.1 The Absorption Capacity
Concept</a></li>
<li><a href="#why-seven-pillars" id="toc-why-seven-pillars">2.2 Why
Seven Pillars?</a></li>
<li><a href="#non-linearity-and-interaction-effects"
id="toc-non-linearity-and-interaction-effects">2.3 Non-Linearity and
Interaction Effects</a></li>
</ul></li>
<li><a href="#framework-architecture" id="toc-framework-architecture">3.
Framework Architecture</a>
<ul>
<li><a href="#processing-pipeline" id="toc-processing-pipeline">3.1
Processing Pipeline</a></li>
<li><a href="#module-structure" id="toc-module-structure">3.2 Module
Structure</a></li>
</ul></li>
<li><a href="#the-seven-pillars" id="toc-the-seven-pillars">4. The Seven
Pillars</a>
<ul>
<li><a href="#pillar-1-liquidity" id="toc-pillar-1-liquidity">4.1 Pillar
1: Liquidity</a></li>
<li><a href="#pillar-2-valuation" id="toc-pillar-2-valuation">4.2 Pillar
2: Valuation</a></li>
<li><a href="#pillar-3-positioning" id="toc-pillar-3-positioning">4.3
Pillar 3: Positioning</a></li>
<li><a href="#pillar-4-volatility" id="toc-pillar-4-volatility">4.4
Pillar 4: Volatility</a></li>
<li><a href="#pillar-5-policy" id="toc-pillar-5-policy">4.5 Pillar 5:
Policy</a></li>
<li><a href="#pillar-6-international-contagion"
id="toc-pillar-6-international-contagion">4.6 Pillar 6: International
Contagion</a></li>
<li><a href="#pillar-7-private-credit"
id="toc-pillar-7-private-credit">4.7 Pillar 7: Private Credit</a></li>
</ul></li>
<li><a href="#indicator-scoring-methodology"
id="toc-indicator-scoring-methodology">5. Indicator Scoring
Methodology</a>
<ul>
<li><a href="#scoring-functions" id="toc-scoring-functions">5.1 Scoring
Functions</a></li>
<li><a href="#pillar-composite-scores"
id="toc-pillar-composite-scores">5.2 Pillar Composite Scores</a></li>
</ul></li>
<li><a href="#composite-mac-calculation"
id="toc-composite-mac-calculation">6. Composite MAC Calculation</a>
<ul>
<li><a href="#weighted-average" id="toc-weighted-average">6.1 Weighted
Average</a></li>
<li><a href="#weight-selection" id="toc-weight-selection">6.2 Weight
Selection</a></li>
<li><a href="#non-linear-breach-interaction-penalty"
id="toc-non-linear-breach-interaction-penalty">6.3 Non-Linear Breach
Interaction Penalty</a></li>
<li><a href="#era-aware-calibration-factor"
id="toc-era-aware-calibration-factor">6.4 Era-Aware Calibration
Factor</a></li>
<li><a href="#mac-interpretation-scale"
id="toc-mac-interpretation-scale">6.5 MAC Interpretation Scale</a></li>
</ul></li>
<li><a href="#machine-learning-components"
id="toc-machine-learning-components">7. Machine Learning Components</a>
<ul>
<li><a href="#architecture" id="toc-architecture">7.1
Architecture</a></li>
<li><a href="#training-data" id="toc-training-data">7.2 Training
Data</a></li>
<li><a href="#optimisation-method-1-crisis-severity-prediction"
id="toc-optimisation-method-1-crisis-severity-prediction">7.3
Optimisation Method 1: Crisis Severity Prediction</a></li>
<li><a href="#optimisation-method-2-hedge-failure-prediction"
id="toc-optimisation-method-2-hedge-failure-prediction">7.4 Optimisation
Method 2: Hedge Failure Prediction</a></li>
<li><a href="#interaction-detection" id="toc-interaction-detection">7.5
Interaction Detection</a></li>
<li><a href="#design-choices-in-ml-component"
id="toc-design-choices-in-ml-component">7.6 Design Choices in ML
Component</a></li>
<li><a href="#comparison-ml-vs.-equal-weights"
id="toc-comparison-ml-vs.-equal-weights">7.7 Comparison: ML vs. Equal
Weights</a></li>
</ul></li>
<li><a href="#transmission-multiplier"
id="toc-transmission-multiplier">8. Transmission Multiplier</a>
<ul>
<li><a href="#multiplier-formula" id="toc-multiplier-formula">8.1
Multiplier Formula</a></li>
<li><a href="#convexity-and-regime-breaks"
id="toc-convexity-and-regime-breaks">8.2 Convexity and Regime
Breaks</a></li>
<li><a href="#market-impact-equation"
id="toc-market-impact-equation">8.3 Market Impact Equation</a></li>
</ul></li>
<li><a href="#momentum-enhanced-status-system"
id="toc-momentum-enhanced-status-system">9. Momentum-Enhanced Status
System</a>
<ul>
<li><a href="#motivation" id="toc-motivation">9.1 Motivation</a></li>
<li><a href="#momentum-calculation" id="toc-momentum-calculation">9.2
Momentum Calculation</a></li>
<li><a href="#deteriorating-status" id="toc-deteriorating-status">9.3
DETERIORATING Status</a></li>
<li><a href="#recommended-actions" id="toc-recommended-actions">9.4
Recommended Actions</a></li>
</ul></li>
<li><a href="#predictive-analytics" id="toc-predictive-analytics">10.
Predictive Analytics</a>
<ul>
<li><a href="#monte-carlo-simulation"
id="toc-monte-carlo-simulation">10.1 Monte Carlo Simulation</a></li>
<li><a href="#shock-propagation-model"
id="toc-shock-propagation-model">10.2 Shock Propagation Model</a></li>
<li><a href="#blind-backtesting" id="toc-blind-backtesting">10.3 Blind
Backtesting</a></li>
</ul></li>
<li><a href="#data-architecture-and-sources"
id="toc-data-architecture-and-sources">11. Data Architecture and
Sources</a>
<ul>
<li><a href="#primary-data-sources-modern-era"
id="toc-primary-data-sources-modern-era">11.1 Primary Data Sources
(Modern Era)</a></li>
<li><a href="#fred-series-used" id="toc-fred-series-used">11.2 FRED
Series Used</a></li>
<li><a href="#data-quality-and-caching"
id="toc-data-quality-and-caching">11.3 Data Quality and Caching</a></li>
</ul></li>
<li><a href="#historical-proxy-chains-19071997"
id="toc-historical-proxy-chains-19071997">12. Historical Proxy Chains
(1907–1997)</a>
<ul>
<li><a href="#era-definitions" id="toc-era-definitions">12.1 Era
Definitions</a></li>
<li><a href="#pillar-data-availability-by-era"
id="toc-pillar-data-availability-by-era">12.2 Pillar Data Availability
by Era</a></li>
<li><a href="#proxy-chain-detail" id="toc-proxy-chain-detail">12.3 Proxy
Chain Detail</a></li>
<li><a href="#era-specific-threshold-overrides"
id="toc-era-specific-threshold-overrides">12.4 Era-Specific Threshold
Overrides</a></li>
<li><a href="#default-scores" id="toc-default-scores">12.5 Default
Scores</a></li>
</ul></li>
<li><a href="#calibration-methodology"
id="toc-calibration-methodology">13. Calibration Methodology</a>
<ul>
<li><a href="#motivation-1" id="toc-motivation-1">13.1
Motivation</a></li>
<li><a href="#calibration-factor-derivation"
id="toc-calibration-factor-derivation">13.2 Calibration Factor
Derivation</a></li>
<li><a href="#leave-one-out-cross-validation"
id="toc-leave-one-out-cross-validation">13.3 Leave-One-Out
Cross-Validation</a></li>
<li><a href="#threshold-sensitivity-analysis"
id="toc-threshold-sensitivity-analysis">13.4 Threshold Sensitivity
Analysis</a></li>
<li><a href="#empirical-threshold-distribution"
id="toc-empirical-threshold-distribution">13.5 Empirical Threshold
Distribution</a></li>
</ul></li>
<li><a href="#backtest-design-six-methodological-improvements"
id="toc-backtest-design-six-methodological-improvements">14. Backtest
Design: Six Methodological Improvements</a>
<ul>
<li><a href="#fix-a-exclude-missing-pillars-from-composite"
id="toc-fix-a-exclude-missing-pillars-from-composite">Fix A — Exclude
Missing Pillars from Composite</a></li>
<li><a href="#fix-b-wire-up-contagion-proxy-via-baa10y"
id="toc-fix-b-wire-up-contagion-proxy-via-baa10y">Fix B — Wire Up
Contagion Proxy via BAA10Y</a></li>
<li><a href="#fix-c-range-based-valuation-scoring"
id="toc-fix-c-range-based-valuation-scoring">Fix C — Range-Based
Valuation Scoring</a></li>
<li><a href="#fix-d-ml-optimised-weights-for-modern-era"
id="toc-fix-d-ml-optimised-weights-for-modern-era">Fix D — ML-Optimised
Weights for Modern Era</a></li>
<li><a href="#fix-e-era-aware-calibration-factor"
id="toc-fix-e-era-aware-calibration-factor">Fix E — Era-Aware
Calibration Factor</a></li>
<li><a href="#fix-f-momentum-enhanced-warning-detection"
id="toc-fix-f-momentum-enhanced-warning-detection">Fix F —
Momentum-Enhanced Warning Detection</a></li>
</ul></li>
<li><a href="#empirical-results-19072025"
id="toc-empirical-results-19072025">15. Empirical Results
(1907–2025)</a>
<ul>
<li><a href="#summary-performance" id="toc-summary-performance">15.1
Summary Performance</a></li>
<li><a href="#crisis-detection-by-era"
id="toc-crisis-detection-by-era">15.2 Crisis Detection by Era</a></li>
<li><a href="#major-crisis-mac-scores-selected"
id="toc-major-crisis-mac-scores-selected">15.3 Major Crisis MAC Scores
(Selected)</a></li>
<li><a href="#key-empirical-findings"
id="toc-key-empirical-findings">15.4 Key Empirical Findings</a></li>
<li><a href="#data-quality-assessment"
id="toc-data-quality-assessment">15.5 Data Quality Assessment</a></li>
</ul></li>
<li><a href="#multi-country-extension"
id="toc-multi-country-extension">16. Multi-Country Extension</a>
<ul>
<li><a href="#overview" id="toc-overview">16.1 Overview</a></li>
<li><a href="#comparative-analysis" id="toc-comparative-analysis">16.2
Comparative Analysis</a></li>
<li><a href="#contagion-pathway-analysis"
id="toc-contagion-pathway-analysis">16.3 Contagion Pathway
Analysis</a></li>
</ul></li>
<li><a href="#limitations-and-design-choices"
id="toc-limitations-and-design-choices">17. Limitations and Design
Choices</a>
<ul>
<li><a href="#known-limitations" id="toc-known-limitations">17.1 Known
Limitations</a></li>
<li><a href="#deliberate-design-choices"
id="toc-deliberate-design-choices">17.2 Deliberate Design
Choices</a></li>
</ul></li>
<li><a href="#pillar-independence-and-dependence-analysis"
id="toc-pillar-independence-and-dependence-analysis">18. Pillar
Independence and Dependence Analysis</a>
<ul>
<li><a href="#motivation-2" id="toc-motivation-2">18.1
Motivation</a></li>
<li><a href="#metrics" id="toc-metrics">18.2 Metrics</a></li>
<li><a href="#system-level-redundancy"
id="toc-system-level-redundancy">18.3 System-Level Redundancy</a></li>
<li><a href="#prior-knowledge-and-hypotheses"
id="toc-prior-knowledge-and-hypotheses">18.4 Prior Knowledge and
Hypotheses</a></li>
<li><a href="#implementation" id="toc-implementation">18.5
Implementation</a></li>
<li><a href="#implications-for-weight-optimisation"
id="toc-implications-for-weight-optimisation">18.6 Implications for
Weight Optimisation</a></li>
<li><a href="#validation" id="toc-validation">18.7 Validation</a></li>
</ul></li>
<li><a href="#references" id="toc-references">19. References</a>
<ul>
<li><a href="#academic-literature" id="toc-academic-literature">Academic
Literature</a></li>
<li><a href="#federal-reserve-research"
id="toc-federal-reserve-research">Federal Reserve Research</a></li>
<li><a href="#data-sources" id="toc-data-sources">Data Sources</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1
id="margin-absorption-capacity-mac-framework-detailed-methodology">Margin
Absorption Capacity (MAC) Framework: Detailed Methodology</h1>
<p><strong>Martyn Brush, FGF Research</strong></p>
<p><strong>Version 5.0 — February 2026</strong></p>
<p><em>Confidential Draft</em></p>
<p><em>A comprehensive guide to the theory, data architecture, machine
learning components, scoring methodology, and empirical validation of
the MAC framework</em></p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#1-executive-summary">Executive Summary</a></li>
<li><a href="#2-theoretical-foundation">Theoretical Foundation</a></li>
<li><a href="#3-framework-architecture">Framework Architecture</a></li>
<li><a href="#4-the-seven-pillars">The Seven Pillars</a></li>
<li><a href="#5-indicator-scoring-methodology">Indicator Scoring
Methodology</a></li>
<li><a href="#6-composite-mac-calculation">Composite MAC
Calculation</a></li>
<li><a href="#7-machine-learning-components">Machine Learning
Components</a></li>
<li><a href="#8-transmission-multiplier">Transmission
Multiplier</a></li>
<li><a href="#9-momentum-enhanced-status-system">Momentum-Enhanced
Status System</a></li>
<li><a href="#10-predictive-analytics">Predictive Analytics</a></li>
<li><a href="#11-data-architecture-and-sources">Data Architecture and
Sources</a></li>
<li><a href="#12-historical-proxy-chains-19071997">Historical Proxy
Chains (1907–1997)</a></li>
<li><a href="#13-calibration-methodology">Calibration
Methodology</a></li>
<li><a
href="#14-backtest-design-six-methodological-improvements">Backtest
Design: Six Methodological Improvements</a></li>
<li><a href="#15-empirical-results-19072025">Empirical Results
(1907–2025)</a></li>
<li><a href="#16-multi-country-extension">Multi-Country
Extension</a></li>
<li><a href="#17-limitations-and-design-choices">Limitations and Design
Choices</a></li>
<li><a href="#18-references">References</a></li>
</ol>
<hr />
<h2 id="executive-summary">1. Executive Summary</h2>
<p>The <strong>Margin Absorption Capacity (MAC)</strong> framework is a
real-time, composite early-warning system that quantifies the capacity
of financial markets to absorb exogenous shocks without entering
non-linear dysfunction. Unlike single-indicator stress metrics (VIX,
credit spreads, TED spread), MAC integrates seven orthogonal risk
dimensions — <em>liquidity, valuation, positioning, volatility, policy,
international contagion,</em> and <em>private credit</em> — into a
single 0–1 score that maps directly to a shock-transmission
multiplier.</p>
<h3 id="core-equation">Core Equation</h3>
<p><span class="math display">\[\text{Market Impact} = \text{Shock}
\;\times\; \text{GRRI Modifier} \;\times\; f(\text{MAC})\]</span></p>
<p>where:</p>
<p><span class="math display">\[f(\text{MAC}) = 1 + \alpha\,(1 -
\text{MAC})^{\beta} \qquad \alpha = 2.0,\; \beta = 1.5\]</span></p>
<p>When MAC approaches zero, the multiplier diverges — the framework
declares a <strong>regime break</strong> (MAC &lt; 0.20) and
discontinues point estimates, acknowledging that non-linear dynamics
render traditional forecasting unreliable.</p>
<h3 id="key-results">Key Results</h3>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Validation period</td>
<td>1907–2025 (117 years)</td>
</tr>
<tr>
<td>Weekly observations</td>
<td>6,158</td>
</tr>
<tr>
<td>Crisis events tested</td>
<td>41 (across 10 monetary/structural eras)</td>
</tr>
<tr>
<td>True positive rate</td>
<td><strong>75.6%</strong> (31/41)</td>
</tr>
<tr>
<td>Improvement over baseline</td>
<td>+49 percentage points (from 26.7%)</td>
</tr>
<tr>
<td>Positioning → hedge failure correlation</td>
<td><strong>100%</strong> in modern sample</td>
</tr>
<tr>
<td>Pillars</td>
<td>7 (including Private Credit from 2006)</td>
</tr>
<tr>
<td>ML weight optimisation</td>
<td>Gradient boosting on 14 scenarios, LOO-CV</td>
</tr>
<tr>
<td>Data sources</td>
<td>FRED, NBER Macrohistory, Schwert (1989), Shiller (Yale), Bank of
England, MeasuringWorth, FINRA</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="theoretical-foundation">2. Theoretical Foundation</h2>
<h3 id="the-absorption-capacity-concept">2.1 The Absorption Capacity
Concept</h3>
<p>The MAC framework rests on a structural observation: the
<em>same</em> shock produces radically different market outcomes
depending on pre-existing conditions. A 2-sigma VIX spike when credit
spreads are ample, leverage is moderate, and the Fed has room to cut
(MAC ≈ 0.80) results in orderly repricing. The identical shock when
spreads are compressed, basis trades are crowded, and the Fed is near
the ELB (MAC ≈ 0.30) triggers forced liquidation cascades, market
dysfunction, and potential regime breaks.</p>
<p>This insight formalises the concept of <strong>financial system
buffers</strong> — the capacity to absorb losses, maintain market
functioning, and avoid positive feedback loops. Each pillar measures a
distinct buffer:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr>
<th>Pillar</th>
<th>Buffer Question</th>
</tr>
</thead>
<tbody>
<tr>
<td>Liquidity</td>
<td>Can markets transact without disorderly price impact?</td>
</tr>
<tr>
<td>Valuation</td>
<td>Are risk premia adequate buffers against repricing?</td>
</tr>
<tr>
<td>Positioning</td>
<td>Is leverage manageable and positioning sufficiently diverse?</td>
</tr>
<tr>
<td>Volatility</td>
<td>Is the volatility regime stable and well-priced?</td>
</tr>
<tr>
<td>Policy</td>
<td>Does the central bank have capacity to respond?</td>
</tr>
<tr>
<td>Contagion</td>
<td>Are cross-border transmission channels stable?</td>
</tr>
<tr>
<td>Private Credit</td>
<td>Is the opaque private credit market showing stress?</td>
</tr>
</tbody>
</table>
<h3 id="why-seven-pillars">2.2 Why Seven Pillars?</h3>
<p>The original framework used five pillars (liquidity, valuation,
positioning, volatility, policy). Two were added based on empirical and
theoretical analysis:</p>
<ol type="1">
<li><p><strong>Contagion (Pillar 6):</strong> The 2008 GFC, 2011
European sovereign crisis, and 2020 COVID crash demonstrated that
domestic buffers are insufficient when cross-border transmission
channels amplify or import stress. The contagion pillar captures dollar
funding squeezes (cross-currency basis), EM capital flight, eurozone
fragmentation (TARGET2), and global banking interconnectedness.</p></li>
<li><p><strong>Private Credit (Pillar 7):</strong> The $1.7T+ private
credit market operates with quarterly NAVs, no public credit ratings,
and payment-in-kind provisions that mask cash flow problems. By the time
stress is visible in private credit, it is typically 3–6 months too
late. The private credit pillar monitors <em>publicly traded
proxies</em> — BDC price/NAV discounts, SLOOS tightening data, leveraged
loan ETFs, and PE firm stock performance — as leading
indicators.</p></li>
</ol>
<h3 id="non-linearity-and-interaction-effects">2.3 Non-Linearity and
Interaction Effects</h3>
<p>Financial crises are characterised by non-linear dynamics: stress in
one dimension amplifies stress in another. The MAC framework captures
this through three mechanisms:</p>
<ol type="1">
<li><p><strong>Breach Interaction Penalty:</strong> When multiple
pillars simultaneously score below 0.30, a penalty (0%–15%) is
subtracted from the weighted-average MAC score. This reflects empirical
evidence that risks compound super-linearly when multiple buffers are
simultaneously depleted.</p></li>
<li><p><strong>Interaction-Adjusted Weights:</strong> When the
positioning pillar is stressed AND either volatility, liquidity, or
contagion is also stressed, the framework activates interaction-adjusted
weights that boost positioning (from 22% to 24%) and contagion (from 16%
to 18%). This captures the <strong>forced-unwind mechanism</strong> —
crowded positions + any catalyst (vol spike, liquidity dry-up, global
contagion) = margin calls → fire sales → liquidity destruction → further
deleveraging.</p></li>
<li><p><strong>Cascade Propagation Model:</strong> The shock propagation
module simulates how an initial shock in one pillar cascades to others
over multiple periods, with transmission accelerating when pillar scores
fall below critical thresholds. This captures the real-world dynamics
where, e.g., a liquidity shock forces positioning unwinds (coefficient
0.50), which spike volatility (coefficient 0.50), which further depletes
liquidity (coefficient 0.40).</p></li>
</ol>
<hr />
<h2 id="framework-architecture">3. Framework Architecture</h2>
<h3 id="processing-pipeline">3.1 Processing Pipeline</h3>
<pre><code>┌─────────────────┐     ┌────────────────────┐     ┌─────────────────────┐
│  Data Sources    │     │  Indicator Scoring  │     │  Composite MAC      │
│                  │     │                     │     │                     │
│  FRED            │────▶│  score_indicator_   │────▶│  Weighted average   │
│  CFTC COT        │     │  simple() or        │     │  + interaction      │
│  ETF data        │     │  score_indicator_   │     │    penalty          │
│  BIS/IMF/ECB     │     │  range()            │     │  + calibration      │
│  NBER/Shiller    │     │                     │     │    factor           │
│  (historical)    │     │  ──▶ 0-1 per        │     │                     │
│                  │     │      indicator       │     │  → MAC score (0-1)  │
└─────────────────┘     └────────────────────┘     └────────┬────────────┘
                                                            │
                        ┌────────────────────┐              │
                        │  ML Weight          │◀─────────────┘
                        │  Optimiser          │
                        │                     │     ┌─────────────────────┐
                        │  Gradient Boosting  │────▶│  Transmission       │
                        │  + LOO-CV           │     │  Multiplier         │
                        │  + Interaction       │     │                     │
                        │    Detection         │     │  f(MAC) = 1+α(1-m)^β│
                        └────────────────────┘     └─────────────────────┘</code></pre>
<h3 id="module-structure">3.2 Module Structure</h3>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Module</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>grri_mac.pillars.*</code></td>
<td>Individual pillar calculators (7 pillars)</td>
</tr>
<tr>
<td><code>grri_mac.pillars.calibrated</code></td>
<td>Calibrated thresholds from historical backtest</td>
</tr>
<tr>
<td><code>grri_mac.mac.scorer</code></td>
<td>Indicator scoring functions (simple + range-based)</td>
</tr>
<tr>
<td><code>grri_mac.mac.composite</code></td>
<td>Composite MAC calculation with breach interaction</td>
</tr>
<tr>
<td><code>grri_mac.mac.ml_weights</code></td>
<td>ML-based weight optimisation (gradient boosting)</td>
</tr>
<tr>
<td><code>grri_mac.mac.momentum</code></td>
<td>Momentum/trend analysis for enhanced status</td>
</tr>
<tr>
<td><code>grri_mac.mac.multiplier</code></td>
<td>MAC → transmission multiplier conversion</td>
</tr>
<tr>
<td><code>grri_mac.mac.multicountry</code></td>
<td>Cross-country MAC comparison and contagion paths</td>
</tr>
<tr>
<td><code>grri_mac.backtest.*</code></td>
<td>Historical backtesting engine (1907–2025)</td>
</tr>
<tr>
<td><code>grri_mac.predictive.*</code></td>
<td>Monte Carlo, blind backtesting, shock propagation</td>
</tr>
<tr>
<td><code>grri_mac.data.*</code></td>
<td>Data clients (FRED, CFTC, ETF, BIS, historical)</td>
</tr>
<tr>
<td><code>grri_mac.historical.*</code></td>
<td>Extended historical data loaders and proxies</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="the-seven-pillars">4. The Seven Pillars</h2>
<h3 id="pillar-1-liquidity">4.1 Pillar 1: Liquidity</h3>
<p><strong>Question:</strong> <em>Can markets transact without
disorderly price impact?</em></p>
<p>Liquidity is the first line of defence against financial stress. When
funding markets tighten, dealers reduce inventory, bid-ask spreads
widen, and intermediation breaks down — transforming orderly repricing
into disorderly dysfunction.</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOFR–IORB spread</td>
<td>FRED (SOFR, IORB)</td>
<td>Overnight funding stress; wider = reserve scarcity</td>
<td>Simple (lower is better)</td>
</tr>
<tr>
<td>CP–Treasury spread</td>
<td>FRED (DCPF3M, DTB3)</td>
<td>Short-term credit market stress</td>
<td>Simple (lower is better)</td>
</tr>
<tr>
<td>Cross-currency basis (EUR/USD)</td>
<td>BIS/Bloomberg</td>
<td>Dollar funding cost for non-US banks</td>
<td>Simple (less negative is better)</td>
</tr>
<tr>
<td>Treasury bid-ask spread</td>
<td>Market data</td>
<td>Market-making capacity in the risk-free benchmark</td>
<td>Simple (lower is better)</td>
</tr>
</tbody>
</table>
<p><strong>Calibrated Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>Ample</th>
<th>Thin</th>
<th>Breach</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOFR–IORB spread</td>
<td>&lt; 3 bps</td>
<td>3–15 bps</td>
<td>&gt; 25 bps</td>
</tr>
<tr>
<td>CP–Treasury spread</td>
<td>&lt; 15 bps</td>
<td>15–40 bps</td>
<td>&gt; 60 bps</td>
</tr>
<tr>
<td>Cross-currency basis</td>
<td>&gt; −20 bps</td>
<td>−20 to −50 bps</td>
<td>&lt; −80 bps</td>
</tr>
<tr>
<td>Treasury bid-ask</td>
<td>&lt; 0.5/32</td>
<td>0.5–1.5/32</td>
<td>&gt; 2.5/32</td>
</tr>
</tbody>
</table>
<p><strong>Historical proxy (pre-1954):</strong> NBER call money rate
minus short-term government rate. Pre-1986 uses FEDFUNDS–TB3MS as SOFR
proxy followed by the TED spread (1986–2017).</p>
<h3 id="pillar-2-valuation">4.2 Pillar 2: Valuation</h3>
<p><strong>Question:</strong> <em>Are risk premia adequate buffers
against repricing?</em></p>
<p>Valuation is scored <strong>two-sided</strong> (range-based): both
compressed <em>and</em> extremely wide spreads indicate problems.
Compressed spreads (e.g., IG OAS ~60 bps in pre-GFC 2007) signal
complacency and repricing risk; extremely wide spreads (IG OAS &gt; 400
bps) signal crisis and distress. Only spreads in a “healthy” middle
range receive ample scores.</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>10Y Term Premium</td>
<td>FRED (DGS10, DGS2)</td>
<td>Compensation for duration risk</td>
<td>Range (both extremes penalised)</td>
</tr>
<tr>
<td>IG OAS</td>
<td>FRED (BAMLC0A0CM)</td>
<td>Investment-grade option-adjusted spread</td>
<td>Range</td>
</tr>
<tr>
<td>HY OAS</td>
<td>FRED (BAMLH0A0HYM2)</td>
<td>High-yield option-adjusted spread</td>
<td>Range</td>
</tr>
</tbody>
</table>
<p><strong>Calibrated Thresholds (range-based):</strong></p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>Ample Range</th>
<th>Thin Range</th>
<th>Breach Range</th>
</tr>
</thead>
<tbody>
<tr>
<td>Term Premium</td>
<td>40–120 bps</td>
<td>0–200 bps</td>
<td>&lt; −50 or &gt; 250 bps</td>
</tr>
<tr>
<td>IG OAS</td>
<td>100–180 bps</td>
<td>75–280 bps</td>
<td>&lt; 60 or &gt; 400 bps</td>
</tr>
<tr>
<td>HY OAS</td>
<td>350–550 bps</td>
<td>280–800 bps</td>
<td>&lt; 200 or &gt; 1,000 bps</td>
</tr>
</tbody>
</table>
<p><strong>Design choice — why range-based?</strong> Under one-sided
scoring, pre-GFC compressed IG OAS (~60 bps) scored as “ample” — maximum
buffer. The two-sided approach correctly penalises compressed spreads as
complacency signals. This was a critical fix (Fix C) that improved
backtest true positive rates for the 2006–2007 pre-GFC build-up
period.</p>
<p><strong>Historical proxy (pre-1997):</strong> Moody’s Baa–Aaa spread
× 4.5 for HY OAS proxy; Moody’s Baa − DGS10 − 40 bps for IG OAS proxy.
Moody’s data available from 1919 via FRED (<code>AAA</code>,
<code>BAA</code>). Pre-1919: NBER railroad bond yield spreads
(high-grade − government) as corporate credit proxy (available from
1857).</p>
<h3 id="pillar-3-positioning">4.3 Pillar 3: Positioning</h3>
<p><strong>Question:</strong> <em>Is leverage manageable and positioning
sufficiently diverse?</em></p>
<p>Positioning is the <strong>most important pillar</strong> in the
ML-optimised framework (22% weight, elevated to 24% under interaction
conditions). The key empirical finding: <strong>positioning breach
predicts Treasury hedge failure with 100% correlation</strong> in the
14-scenario modern sample. When the Treasury basis trade is crowded,
speculative positioning is extreme (in either direction), or short
volatility exposure is concentrated, forced deleveraging can reverse the
traditional safe-haven function of Treasuries.</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basis trade size (<span class="math inline">\(B) | CFTC COT data |
Treasury cash-futures basis trade crowding | Simple (lower is better) |
| Basis trade (OI-relative %) | CFTC COT data | Dynamic threshold that
adapts to market growth | Simple (lower is better) |
| Treasury spec net percentile | CFTC COT data | Extreme positioning in
either direction | Range (mid-percentile is healthy) |
| SVXY AUM (\)</span>M)</td>
<td>ETF data</td>
<td>Short volatility exposure concentration</td>
<td>Simple (lower is better)</td>
</tr>
</tbody>
</table>
<p><strong>Calibrated Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>Ample</th>
<th>Thin</th>
<th>Breach</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basis trade (absolute)</td>
<td>&lt; $350B</td>
<td>$350–600B</td>
<td>&gt; $800B</td>
</tr>
<tr>
<td>Basis trade (OI-relative)</td>
<td>&lt; 8% of OI</td>
<td>8–12%</td>
<td>&gt; 18%</td>
</tr>
<tr>
<td>Spec net percentile</td>
<td>35th–65th</td>
<td>18th–82nd</td>
<td>&lt; 5th or &gt; 95th</td>
</tr>
<tr>
<td>SVXY AUM</td>
<td>&lt; $350M</td>
<td>$350–600M</td>
<td>&gt; $850M</td>
</tr>
</tbody>
</table>
<p><strong>Design choice — OI-relative thresholds:</strong> Fixed dollar
thresholds ($350B/$600B/$800B) become obsolete as the Treasury futures
market grows. The OI-relative metric (basis trade size as a percentage
of total Treasury open interest) adapts automatically. Both metrics are
computed; the OI-relative version is preferred when total OI exceeds
$100B.</p>
<p><strong>Design choice — critical breach override:</strong> If any
single positioning indicator scores below 0.15 (near-breach), the entire
positioning composite is capped at 0.18, forcing the pillar into breach
status. This reflects the observation that a single extreme positioning
indicator is sufficient to create forced-unwind risk, regardless of how
the other indicators score.</p>
<p><strong>Key references:</strong> - “Quantifying Treasury Cash-Futures
Basis Trades” (Federal Reserve, March 2024): Estimated basis trade at
$260B–$574B in late 2023 - “Recent Developments in Hedge Funds’ Treasury
Futures and Repo Positions” (Federal Reserve, August 2023): Identified
the trade as a financial stability vulnerability - “Hedge Funds and the
Treasury Cash-Futures Disconnect” (OFR, April 2021): Documented basis
trade unwind contribution to March 2020 Treasury dysfunction</p>
<p><strong>Historical proxy (pre-1986):</strong> FINRA/NYSE margin debt
as a proportion of GDP (available from 1918). Pre-1918: default score of
0.50 (neutral) — no margin data exists.</p>
<h3 id="pillar-4-volatility">4.4 Pillar 4: Volatility</h3>
<p><strong>Question:</strong> <em>Is the volatility regime stable and
well-priced?</em></p>
<p>Volatility is scored range-based: both very low VIX (suppressed vol →
complacency) and very high VIX (crisis vol) indicate problems. Extended
low-volatility periods receive an additional <strong>persistence
penalty</strong> because prolonged suppression encourages leverage
build-up and underpricing of tail risk.</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>VIX level</td>
<td>FRED (VIXCLS)</td>
<td>S&amp;P 500 implied volatility</td>
<td>Range</td>
</tr>
<tr>
<td>VIX term structure (M2/M1)</td>
<td>VIX futures / ETF proxy</td>
<td>Contango ≈ normal; backwardation ≈ stress</td>
<td>Range</td>
</tr>
<tr>
<td>Realised–implied vol gap</td>
<td>FRED + calculation</td>
<td>Divergence between RV and IV</td>
<td>Simple (lower is better)</td>
</tr>
</tbody>
</table>
<p><strong>Calibrated Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>Ample Range</th>
<th>Thin Range</th>
<th>Breach Range</th>
</tr>
</thead>
<tbody>
<tr>
<td>VIX level</td>
<td>12–22</td>
<td>10–30</td>
<td>&lt; 9 or &gt; 40</td>
</tr>
<tr>
<td>Term structure (M2/M1)</td>
<td>1.00–1.04</td>
<td>0.92–1.06</td>
<td>&lt; 0.88 or &gt; 1.08</td>
</tr>
<tr>
<td>RV–IV gap</td>
<td>&lt; 15%</td>
<td>15–30%</td>
<td>&gt; 45%</td>
</tr>
</tbody>
</table>
<p><strong>VIX persistence penalty:</strong> When VIX stays below 15 for
an extended period, the volatility score is penalised. The penalty
accumulates at 0.3% per day below threshold over a 60-day rolling
window, capped at 15%. This captures the “calm before the storm” dynamic
seen before Volmageddon (extended sub-12 VIX) and the COVID crash.</p>
<p><strong>Historical proxy chain:</strong> - 1990–present: VIXCLS
(native) - 1986–1990: VXO (CBOE S&amp;P 100 volatility, predecessor) -
1971–1986: NASDAQ realised volatility × 1.2 volatility risk premium
adjustment - 1802–1971: Schwert (1989) monthly stock return volatility ×
1.3 VRP adjustment</p>
<h3 id="pillar-5-policy">4.5 Pillar 5: Policy</h3>
<p><strong>Question:</strong> <em>Does the central bank have capacity to
respond to a crisis?</em></p>
<p>Policy capacity is a buffer: when the Fed has room to cut rates and
expand its balance sheet, market stress can be absorbed through policy
intervention. When the Fed is constrained (at the ELB, balance sheet
already large, inflation above target), markets must absorb shocks on
their own.</p>
<p>**Design choice — Observable ELB distance vs. unobservable
r*:<strong> We measure policy room as the distance from the effective
lower bound (ELB, 0%), not deviation from an estimated neutral rate
(r*). This is: - </strong>Simpler:<strong> uses directly observable data
(Fed Funds rate) - </strong>More accurate:<strong> r* estimates have
wide confidence intervals and have been repeatedly revised -
</strong>Directly relevant:** what matters in a crisis is whether the
Fed <em>can cut</em>, not whether rates are above or below neutral</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy room (bps from ELB)</td>
<td>FRED (DFF)</td>
<td>Distance from 0% — how much the Fed can cut</td>
<td>Simple (higher is better)</td>
</tr>
<tr>
<td>Fed balance sheet / GDP</td>
<td>FRED (WALCL, GDP)</td>
<td>Capacity for further asset purchases</td>
<td>Simple (lower is better)</td>
</tr>
<tr>
<td>Core PCE vs. target (bps)</td>
<td>FRED (PCEPILFE)</td>
<td>Inflation constraint on policy action</td>
<td>Simple (closer to 2% is better)</td>
</tr>
<tr>
<td>Fiscal space (Debt/GDP %)</td>
<td>FRED (GFDEGDQ188S)</td>
<td>Federal debt constraint on fiscal stimulus</td>
<td>Simple (lower is better)</td>
</tr>
</tbody>
</table>
<p><strong>Calibrated Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>Ample</th>
<th>Thin</th>
<th>Breach</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy room</td>
<td>&gt; 150 bps</td>
<td>50–150 bps</td>
<td>&lt; 25 bps</td>
</tr>
<tr>
<td>Balance sheet / GDP</td>
<td>&lt; 24%</td>
<td>24–33%</td>
<td>&gt; 40%</td>
</tr>
<tr>
<td>Core PCE vs. target</td>
<td>&lt; 50 bps deviation</td>
<td>50–150 bps</td>
<td>&gt; 250 bps</td>
</tr>
<tr>
<td>Fiscal space (Debt/GDP)</td>
<td>&lt; 70%</td>
<td>70–90%</td>
<td>&gt; 120%</td>
</tr>
</tbody>
</table>
<p><strong>Historical proxy (pre-1954):</strong> Fed discount rate (FRED
<code>INTDSRUSM193N</code>, available from 1913). Pre-1913: no central
bank exists → structurally penalised default score of 0.25 (no lender of
last resort). 1913–1934: early Fed with limited toolkit → default score
0.35.</p>
<h3 id="pillar-6-international-contagion">4.6 Pillar 6: International
Contagion</h3>
<p><strong>Question:</strong> <em>Are cross-border transmission channels
stable?</em></p>
<p>The contagion pillar captures three transmission mechanisms: (1)
dollar funding stress via cross-currency basis, (2) EM vulnerability via
capital flows and reserve coverage, and (3) global banking
interconnectedness via G-SIB stress proxies.</p>
<p><strong>Indicators:</strong></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Source</th>
<th>Description</th>
<th>Scoring</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cross-currency basis (multi-pair)</td>
<td>BIS/Bloomberg</td>
<td>Dollar funding stress across EUR, JPY, GBP</td>
<td>Simple (narrower is better)</td>
</tr>
<tr>
<td>TARGET2 imbalances (% GDP)</td>
<td>ECB</td>
<td>Eurozone fragmentation risk</td>
<td>Simple (lower is better)</td>
</tr>
<tr>
<td>EM reserve coverage (Guidotti-Greenspan ratio)</td>
<td>IMF</td>
<td>FX reserves / short-term external debt</td>
<td>Simple (higher is better)</td>
</tr>
<tr>
<td>Cross-border banking flows (% GDP)</td>
<td>BIS</td>
<td>Sudden stop / surge indicator</td>
<td>Range</td>
</tr>
<tr>
<td>Global equity correlation (30-day)</td>
<td>Calculated (SPY/EFA/EEM)</td>
<td>Contagion spreading vs. decoupling</td>
<td>Range</td>
</tr>
<tr>
<td>BTC–SPY correlation (60-day)</td>
<td>Calculated</td>
<td>Retail leverage / risk-on contagion channel</td>
<td>Simple (lower is better)</td>
</tr>
<tr>
<td>G-SIB stress proxy</td>
<td>FRED (BAMLC0A4CBBB) or BKX vol</td>
<td>Banking system credit stress</td>
<td>Simple (lower is better)</td>
</tr>
</tbody>
</table>
<p><strong>G-SIB proxy: regime-specific thresholds.</strong> Financial
sector credit spreads have structurally tightened with post-GFC
regulation (Dodd-Frank, Basel III). The framework uses three threshold
regimes:</p>
<table>
<thead>
<tr>
<th>Period</th>
<th>Ample</th>
<th>Thin</th>
<th>Breach</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-2010</td>
<td>&lt; 100 bps</td>
<td>100–200 bps</td>
<td>&gt; 350 bps</td>
</tr>
<tr>
<td>2010–2014</td>
<td>&lt; 80 bps</td>
<td>80–150 bps</td>
<td>&gt; 280 bps</td>
</tr>
<tr>
<td>Post-2015</td>
<td>&lt; 60 bps</td>
<td>60–120 bps</td>
<td>&gt; 200 bps</td>
</tr>
</tbody>
</table>
<p><strong>Historical proxy (pre-1990):</strong> Moody’s Baa–10Y
Treasury spread (FRED <code>BAA10Y</code>) as financial stress proxy,
available from 1919. Pre-1919: GBP/USD deviation from gold parity as
contagion proxy (BoE data, available from 1791).</p>
<h3 id="pillar-7-private-credit">4.7 Pillar 7: Private Credit</h3>
<p><strong>Question:</strong> <em>Is the opaque private credit market
showing stress?</em></p>
<p>The $1.7T+ private credit market presents unique monitoring
challenges: - No daily pricing (quarterly NAVs at best) - No public
credit ratings (or delayed downgrades) - PIK (payment-in-kind)
provisions mask cash flow problems - Amendment/extend practices delay
defaults</p>
<p><strong>Our approach — indirect proxy signals:</strong> Since direct
observation of private credit is limited, we monitor four categories of
publicly observable proxies:</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 23%" />
<col style="width: 17%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Sub-Component</th>
<th>Indicators</th>
<th>Source</th>
<th>Key Insight</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BDC Price/NAV Discounts</strong></td>
<td>ARCC, MAIN, FSK, PSEC, GBDC discounts</td>
<td>Market data</td>
<td>BDCs trade daily; their discount is a real-time canary for NAV
markdowns 3–6 months ahead</td>
</tr>
<tr>
<td><strong>SLOOS (Fed Survey)</strong></td>
<td>C&amp;I tightening to small firms, spread increases</td>
<td>FRED (DRTSCIS, DRISCFS)</td>
<td>Quarterly survey captures bank lending standards to private credit’s
target market</td>
</tr>
<tr>
<td><strong>Leveraged Loan Market</strong></td>
<td>BKLN/SRLN ETF prices, CLO spreads</td>
<td>Market data</td>
<td>Broadly syndicated loan market leads private credit pricing</td>
</tr>
<tr>
<td><strong>PE Firm Performance</strong></td>
<td>KKR, BX, APO, CG stock prices (30-day)</td>
<td>Market data</td>
<td>PE sponsor equity embeds information about portfolio company
health</td>
</tr>
</tbody>
</table>
<p><strong>SLOOS Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Normal</th>
<th>Elevated</th>
<th>Severe</th>
</tr>
</thead>
<tbody>
<tr>
<td>C&amp;I tightening (net %)</td>
<td>&lt; 20%</td>
<td>20–40%</td>
<td>&gt; 60%</td>
</tr>
</tbody>
</table>
<p><strong>BDC Discount Thresholds:</strong></p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Normal</th>
<th>Elevated</th>
<th>Severe</th>
</tr>
</thead>
<tbody>
<tr>
<td>Weighted avg. discount</td>
<td>&gt; −5%</td>
<td>−5% to −15%</td>
<td>&lt; −25%</td>
</tr>
</tbody>
</table>
<p><strong>Stress Classification:</strong></p>
<table>
<thead>
<tr>
<th>Level</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Benign</td>
<td>No stress signals</td>
</tr>
<tr>
<td>Emerging</td>
<td>Early warning signs (1–2 indicators)</td>
</tr>
<tr>
<td>Elevated</td>
<td>Multiple signals flashing</td>
</tr>
<tr>
<td>Severe</td>
<td>Broad-based stress</td>
</tr>
</tbody>
</table>
<p><strong>Historical availability:</strong> SLOOS data from ~1990;
BDC/ETF data from ~2004; PE firm data from ~2004. Pre-2004: slightly
cautious default score of 0.52. The private credit pillar is excluded
from the composite calculation for dates before 2006 (Fix A: missing
pillar exclusion).</p>
<hr />
<h2 id="indicator-scoring-methodology">5. Indicator Scoring
Methodology</h2>
<h3 id="scoring-functions">5.1 Scoring Functions</h3>
<p>All indicators are scored on a continuous 0–1 scale using
piecewise-linear interpolation between calibrated thresholds:</p>
<ul>
<li><strong>1.0 (Ample):</strong> Indicator within healthy range;
substantial buffer capacity</li>
<li><strong>0.5 (Thin):</strong> Buffer depleted; elevated sensitivity
to shocks</li>
<li><strong>0.0 (Breach):</strong> Buffer exhausted; non-linear dynamics
likely</li>
</ul>
<p>Two scoring functions are used:</p>
<h4 id="score_indicator_simple-one-sided-scoring">5.1.1
<code>score_indicator_simple</code> — One-Sided Scoring</h4>
<p>Used when directionality is unambiguous (e.g., SOFR–IORB spread:
lower is always better; policy room: higher is always better).</p>
<p><span class="math display">\[
s(x) = \begin{cases}
1.0 &amp; \text{if } x \geq x_{\text{ample}} \\[6pt]
0.5 + 0.5 \cdot \dfrac{x - x_{\text{thin}}}{x_{\text{ample}} -
x_{\text{thin}}} &amp; \text{if } x_{\text{thin}} \leq x &lt;
x_{\text{ample}} \\[6pt]
0.5 \cdot \dfrac{x - x_{\text{breach}}}{x_{\text{thin}} -
x_{\text{breach}}} &amp; \text{if } x_{\text{breach}} \leq x &lt;
x_{\text{thin}} \\[6pt]
0.0 &amp; \text{if } x &lt; x_{\text{breach}}
\end{cases}
\]</span></p>
<p>For “lower is better” indicators, the function is reflected.</p>
<h4 id="score_indicator_range-two-sided-scoring">5.1.2
<code>score_indicator_range</code> — Two-Sided Scoring</h4>
<p>Used when both extremes are problematic (e.g., credit spreads: too
tight = complacency; too wide = crisis).</p>
<p>Given ample range <span class="math inline">\([a_L, a_H]\)</span>,
thin range <span class="math inline">\([t_L, t_H]\)</span>, and breach
range <span class="math inline">\([b_L, b_H]\)</span>:</p>
<p><span class="math display">\[
s(x) = \begin{cases}
1.0 &amp; \text{if } a_L \leq x \leq a_H \\[6pt]
\text{interpolate from 0.5 to 1.0} &amp; \text{if } t_L \leq x &lt; a_L
\text{ or } a_H &lt; x \leq t_H \\[6pt]
\text{interpolate from 0.0 to 0.5} &amp; \text{if } b_L \leq x &lt; t_L
\text{ or } t_H &lt; x \leq b_H \\[6pt]
0.0 &amp; \text{if } x &lt; b_L \text{ or } x &gt; b_H
\end{cases}
\]</span></p>
<h3 id="pillar-composite-scores">5.2 Pillar Composite Scores</h3>
<p>Each pillar’s composite score is the equally-weighted average of its
constituent indicator scores, computed over <strong>only those
indicators with available data</strong>. Missing indicators are excluded
(not defaulted to 0.5) to prevent dilution of real signals.</p>
<p><span class="math display">\[\text{Pillar}_j =
\frac{1}{|\mathcal{I}_j|} \sum_{i \in \mathcal{I}_j} s_i\]</span></p>
<p>where <span class="math inline">\(\mathcal{I}_j\)</span> is the set
of indicators with non-null values for pillar <span
class="math inline">\(j\)</span>.</p>
<hr />
<h2 id="composite-mac-calculation">6. Composite MAC Calculation</h2>
<h3 id="weighted-average">6.1 Weighted Average</h3>
<p>The composite MAC score is a weighted average of pillar scores:</p>
<p><span class="math display">\[\text{MAC}_{\text{raw}} = \sum_{j=1}^{P}
w_j \cdot \text{Pillar}_j\]</span></p>
<p>where <span class="math inline">\(P\)</span> is the number of active
pillars (those with real data) and weights <span
class="math inline">\(w_j\)</span> sum to 1.0. Weights are normalised
over active pillars only.</p>
<h3 id="weight-selection">6.2 Weight Selection</h3>
<p>The framework chooses weights based on the current date and stress
pattern:</p>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr>
<th>Condition</th>
<th>Weights Used</th>
</tr>
</thead>
<tbody>
<tr>
<td>2006+ with amplification conditions</td>
<td>Interaction-adjusted ML weights</td>
</tr>
<tr>
<td>2006+ normal conditions</td>
<td>ML-optimised weights</td>
</tr>
<tr>
<td>Pre-1971</td>
<td>Era-specific weights (see §12)</td>
</tr>
<tr>
<td>Default / fallback</td>
<td>Equal weights (1/P)</td>
</tr>
</tbody>
</table>
<p><strong>7-Pillar ML-Optimised Weights:</strong></p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Pillar</th>
<th>Weight</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>Positioning</td>
<td><strong>22%</strong></td>
<td>Key predictor of hedge failure (100% correlation)</td>
</tr>
<tr>
<td>Liquidity</td>
<td>16%</td>
<td>Critical for funding stress detection</td>
</tr>
<tr>
<td>Contagion</td>
<td>16%</td>
<td>Distinguishes global vs. local crises</td>
</tr>
<tr>
<td>Volatility</td>
<td>15%</td>
<td>Ubiquitous (breached in 9/14) but not predictive alone</td>
</tr>
<tr>
<td>Private Credit</td>
<td>12%</td>
<td>Leading indicator for credit cycle</td>
</tr>
<tr>
<td>Valuation</td>
<td>10%</td>
<td>Only breaches in extreme crises (2/14)</td>
</tr>
<tr>
<td>Policy</td>
<td><strong>9%</strong></td>
<td>Never breached in the 14-scenario training set</td>
</tr>
</tbody>
</table>
<p><strong>Interaction-Adjusted Weights</strong> (activated when
positioning + vol/liquidity/contagion are jointly stressed):</p>
<table>
<thead>
<tr>
<th>Pillar</th>
<th>Weight</th>
</tr>
</thead>
<tbody>
<tr>
<td>Positioning</td>
<td><strong>24%</strong></td>
</tr>
<tr>
<td>Contagion</td>
<td><strong>18%</strong></td>
</tr>
<tr>
<td>Volatility</td>
<td>16%</td>
</tr>
<tr>
<td>Liquidity</td>
<td>14%</td>
</tr>
<tr>
<td>Private Credit</td>
<td>12%</td>
</tr>
<tr>
<td>Valuation</td>
<td>9%</td>
</tr>
<tr>
<td>Policy</td>
<td>7%</td>
</tr>
</tbody>
</table>
<h3 id="non-linear-breach-interaction-penalty">6.3 Non-Linear Breach
Interaction Penalty</h3>
<p>After weighted averaging, a penalty is subtracted for multiple
simultaneous breaches:</p>
<p><span class="math display">\[\text{MAC}_{\text{final}} =
\max\!\left(0,\;\text{MAC}_{\text{raw}} - \pi(n)\right)\]</span></p>
<p>where <span class="math inline">\(n\)</span> is the number of pillars
with scores below 0.30, and:</p>
<table>
<thead>
<tr>
<th><span class="math inline">\(n\)</span></th>
<th><span class="math inline">\(\pi(n)\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0–1</td>
<td>0.00</td>
</tr>
<tr>
<td>2</td>
<td>0.03</td>
</tr>
<tr>
<td>3</td>
<td>0.08</td>
</tr>
<tr>
<td>4</td>
<td>0.12</td>
</tr>
<tr>
<td>5–7</td>
<td>0.15 (cap)</td>
</tr>
</tbody>
</table>
<h3 id="era-aware-calibration-factor">6.4 Era-Aware Calibration
Factor</h3>
<p>A multiplicative calibration factor adjusts the final score:</p>
<p><span class="math display">\[\text{MAC}_{\text{calibrated}} =
\text{MAC}_{\text{final}} \times \alpha_{\text{era}}\]</span></p>
<table>
<thead>
<tr>
<th>Era</th>
<th><span class="math inline">\(\alpha\)</span></th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>2006–present</td>
<td>0.78</td>
<td>Full data; calibrated on 14 modern scenarios</td>
</tr>
<tr>
<td>1971–2006</td>
<td>0.90</td>
<td>Proxy data already compresses scores</td>
</tr>
<tr>
<td>Pre-1971</td>
<td>1.00</td>
<td>Schwert vol and NBER spreads structurally wider</td>
</tr>
</tbody>
</table>
<h3 id="mac-interpretation-scale">6.5 MAC Interpretation Scale</h3>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 22%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>MAC Score</th>
<th>Status</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td>≥ 0.80</td>
<td><strong>AMPLE</strong></td>
<td>Substantial buffer capacity; shocks absorbed 1:1</td>
</tr>
<tr>
<td>0.60–0.80</td>
<td><strong>COMFORTABLE</strong></td>
<td>Can absorb moderate shocks</td>
</tr>
<tr>
<td>0.40–0.60</td>
<td><strong>THIN</strong></td>
<td>Limited buffer; elevated transmission risk</td>
</tr>
<tr>
<td>0.20–0.40</td>
<td><strong>STRETCHED</strong></td>
<td>High transmission risk; close monitoring required</td>
</tr>
<tr>
<td>&lt; 0.20</td>
<td><strong>REGIME BREAK</strong></td>
<td>Buffers exhausted; non-linear dynamics likely</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="machine-learning-components">7. Machine Learning Components</h2>
<h3 id="architecture">7.1 Architecture</h3>
<p>The ML module
(<code>grri_mac.mac.ml_weights.MLWeightOptimizer</code>) uses ensemble
methods to move beyond equal weights, capturing non-linear relationships
and pillar interactions that simple averaging misses.</p>
<h3 id="training-data">7.2 Training Data</h3>
<p><strong>14 historical crisis scenarios (1998–2025)</strong> with
FRED-verified indicator values:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Date</th>
<th>Treasury Hedge</th>
<th>Severity</th>
</tr>
</thead>
<tbody>
<tr>
<td>LTCM Crisis</td>
<td>1998-09-23</td>
<td>Worked</td>
<td>Extreme</td>
</tr>
<tr>
<td>Dot-com Peak</td>
<td>2000-03-10</td>
<td>Worked</td>
<td>Moderate</td>
</tr>
<tr>
<td>9/11 Attacks</td>
<td>2001-09-17</td>
<td>Worked</td>
<td>High</td>
</tr>
<tr>
<td>Dot-com Bottom</td>
<td>2002-10-09</td>
<td>Worked</td>
<td>High</td>
</tr>
<tr>
<td>Bear Stearns</td>
<td>2008-03-16</td>
<td>Worked</td>
<td>High</td>
</tr>
<tr>
<td>Lehman Brothers</td>
<td>2008-09-15</td>
<td>Worked initially</td>
<td>Extreme</td>
</tr>
<tr>
<td>Flash Crash</td>
<td>2010-05-06</td>
<td>Worked</td>
<td>Moderate</td>
</tr>
<tr>
<td>US Downgrade</td>
<td>2011-08-08</td>
<td>Worked</td>
<td>Moderate</td>
</tr>
<tr>
<td>Volmageddon</td>
<td>2018-02-05</td>
<td><strong>Failed</strong> (short-vol)</td>
<td>Moderate</td>
</tr>
<tr>
<td>Repo Spike</td>
<td>2019-09-17</td>
<td>Worked</td>
<td>Moderate</td>
</tr>
<tr>
<td>COVID Crash</td>
<td>2020-03-16</td>
<td><strong>Failed</strong> (basis unwind)</td>
<td>Extreme</td>
</tr>
<tr>
<td>Russia–Ukraine</td>
<td>2022-02-24</td>
<td>Worked</td>
<td>Moderate</td>
</tr>
<tr>
<td>SVB Crisis</td>
<td>2023-03-10</td>
<td>Worked</td>
<td>High</td>
</tr>
<tr>
<td>April 2025 Tariffs</td>
<td>2025-04-02</td>
<td><strong>Failed</strong> (crowding)</td>
<td>Moderate</td>
</tr>
</tbody>
</table>
<h3 id="optimisation-method-1-crisis-severity-prediction">7.3
Optimisation Method 1: Crisis Severity Prediction</h3>
<p><strong>Objective:</strong> Predict expected MAC score (continuous,
0–1) from pillar scores.</p>
<p><strong>Model:</strong> Gradient Boosting Regressor with: - 50
estimators, max depth 2 (shallow to prevent overfitting on 14 samples) -
Learning rate 0.10, minimum 2 samples per leaf - Random seed 42 for
reproducibility</p>
<p><strong>Features:</strong> - 6 base features: pillar scores for
liquidity, valuation, positioning, volatility, policy, contagion - 6
interaction features: pairwise products of theoretically motivated
pillar pairs</p>
<p><strong>Interaction pairs (based on financial theory):</strong> 1.
Positioning × Volatility — crowded trades + vol spike = forced unwind 2.
Positioning × Liquidity — position crowding + illiquidity = margin calls
3. Policy × Contagion — policy constraints + global stress = limited
response 4. Liquidity × Contagion — funding stress + global = dollar
squeeze 5. Valuation × Volatility — compressed spreads + vol = repricing
6. Positioning × Contagion — positioning + global = coordinated
unwind</p>
<p><strong>Validation:</strong> Leave-one-out cross-validation (LOOCV),
appropriate for the small sample size (N=14). Each scenario is held out
in turn; the model is trained on the remaining 13 and tested on the
held-out scenario.</p>
<h3 id="optimisation-method-2-hedge-failure-prediction">7.4 Optimisation
Method 2: Hedge Failure Prediction</h3>
<p><strong>Objective:</strong> Classify whether Treasury hedges will
fail (binary) from pillar scores.</p>
<p><strong>Model:</strong> Gradient Boosting Classifier with: - 50
estimators, max depth 2, class balancing (balanced weights) - Same
interaction features as severity model</p>
<p><strong>Key finding:</strong> Positioning is the dominant predictor
of hedge failure. In every scenario where positioning breached, Treasury
hedges failed (Volmageddon 2018: short-vol crowding; COVID 2020: basis
trade unwind; April 2025 Tariffs: record basis trade size). The
correlation is 100% in the training sample.</p>
<h3 id="interaction-detection">7.5 Interaction Detection</h3>
<p>The optimizer automatically detects significant interaction
effects:</p>
<p><strong>Detected amplifying interactions:</strong> -
<strong>Positioning × Volatility</strong> — “Crowded positioning +
volatility spike leads to forced unwinding. This explains hedge failures
during COVID and April 2025.” - <strong>Positioning × Liquidity</strong>
— “Position crowding + illiquidity triggers margin calls and fire sales,
amplifying price dislocations.” - <strong>Policy × Contagion</strong> —
“When policy is constrained AND global contagion spreads, central banks
have limited tools to respond.” - <strong>Liquidity × Contagion</strong>
— “Liquidity stress combined with global contagion creates dollar
funding squeeze and correlated deleveraging.”</p>
<h3 id="design-choices-in-ml-component">7.6 Design Choices in ML
Component</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 34%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Choice</th>
<th>Decision</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Algorithm</strong></td>
<td>Gradient Boosting (not deep learning)</td>
<td>Small sample (14); ensemble trees handle non-linearity without
overfitting</td>
</tr>
<tr>
<td><strong>Tree depth</strong></td>
<td>Max depth 2</td>
<td>Prevents overfitting; each tree captures at most 2-way
interactions</td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td>LOOCV (not k-fold)</td>
<td>With N=14, LOOCV maximises training data per fold</td>
</tr>
<tr>
<td><strong>Interaction features</strong></td>
<td>Explicit pairwise products</td>
<td>Theory-driven feature engineering; not relying on model to discover
interactions</td>
</tr>
<tr>
<td><strong>Weight derivation</strong></td>
<td>Feature importance → normalised weights</td>
<td>Directly interpretable; transparently maps to portfolio
decisions</td>
</tr>
<tr>
<td><strong>Regularisation</strong></td>
<td>Low estimator count (50), high min_samples_leaf (2)</td>
<td>Prevents complexity explosion on small sample</td>
</tr>
<tr>
<td><strong>Equal weights fallback</strong></td>
<td>Used when ML weights ≈ equal (avg deviation &lt; 3%)</td>
<td>If ML adds no value, equal weights are preferred for simplicity</td>
</tr>
</tbody>
</table>
<h3 id="comparison-ml-vs.-equal-weights">7.7 Comparison: ML vs. Equal
Weights</h3>
<p>The ML optimizer includes a built-in comparison tool:</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 40%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Metric</th>
<th>Equal Weights</th>
<th>ML-Optimised</th>
</tr>
</thead>
<tbody>
<tr>
<td>Approach</td>
<td>1/P per pillar</td>
<td>GB feature importance</td>
</tr>
<tr>
<td>Interactions</td>
<td>None</td>
<td>6 explicit pairs</td>
</tr>
<tr>
<td>Regime awareness</td>
<td>No</td>
<td>Yes (interaction-adjusted)</td>
</tr>
<tr>
<td>Recommendation</td>
<td>“Equal weights sufficient” when avg deviation &lt; 3%</td>
<td>“Use ML weights” when RMSE reduction &gt; 10%</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="transmission-multiplier">8. Transmission Multiplier</h2>
<h3 id="multiplier-formula">8.1 Multiplier Formula</h3>
<p>The MAC score maps to a transmission multiplier via a convex
function:</p>
<p><span class="math display">\[f(\text{MAC}) = 1 + \alpha\,(1 -
\text{MAC})^{\beta}\]</span></p>
<p>Default parameters: <span class="math inline">\(\alpha =
2.0\)</span>, <span class="math inline">\(\beta = 1.5\)</span>.</p>
<table>
<thead>
<tr>
<th>MAC</th>
<th>Multiplier</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.00</td>
<td>1.00×</td>
<td>Shock absorbed 1:1</td>
</tr>
<tr>
<td>0.80</td>
<td>1.18×</td>
<td>Low transmission</td>
</tr>
<tr>
<td>0.60</td>
<td>1.49×</td>
<td>Moderate amplification</td>
</tr>
<tr>
<td>0.50</td>
<td>1.71×</td>
<td>Significant amplification</td>
</tr>
<tr>
<td>0.40</td>
<td>1.97×</td>
<td>Elevated</td>
</tr>
<tr>
<td>0.30</td>
<td>2.26×</td>
<td>High</td>
</tr>
<tr>
<td>0.20</td>
<td><strong>Regime break</strong></td>
<td>Point estimates unreliable</td>
</tr>
</tbody>
</table>
<h3 id="convexity-and-regime-breaks">8.2 Convexity and Regime
Breaks</h3>
<p>The <span class="math inline">\(\beta = 1.5\)</span> exponent creates
convexity: the multiplier increases slowly for small MAC reductions
(from 1.0 to 0.7) but accelerates sharply as MAC approaches 0.2. Below
MAC = 0.20, the framework declares a <strong>regime break</strong> and
returns <code>multiplier = None</code>. During regime breaks:</p>
<ul>
<li>Traditional correlation structures break down</li>
<li>Safe-haven assets may reverse (Treasuries selling off rather than
rallying)</li>
<li>VaR models become unreliable</li>
<li>Liquidity can disappear entirely in specific market segments</li>
</ul>
<p>This is an explicit design choice: instead of extrapolating an
exponential function to infinity, the framework acknowledges its own
limits and advises non-quantitative defensive positioning.</p>
<h3 id="market-impact-equation">8.3 Market Impact Equation</h3>
<p><span class="math display">\[\text{Market Impact} = \text{Shock
Magnitude} \times \text{GRRI Modifier} \times f(\text{MAC})\]</span></p>
<p>The GRRI modifier captures country-specific structural resilience
(governance, reserve adequacy, fiscal capacity). For the US, the GRRI
modifier is typically ~1.0 (baseline). For emerging markets with weaker
institutional frameworks, the GRRI modifier may be &gt; 1.0, indicating
additional structural vulnerability.</p>
<hr />
<h2 id="momentum-enhanced-status-system">9. Momentum-Enhanced Status
System</h2>
<h3 id="motivation">9.1 Motivation</h3>
<p>A declining MAC from 0.65 → 0.50 carries more information than a
static MAC of 0.52. The momentum system tracks the rate of change in the
composite MAC score, producing a five-level status:</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>COMFORTABLE</strong></td>
<td>MAC &gt; 0.65</td>
</tr>
<tr>
<td><strong>CAUTIOUS</strong></td>
<td>MAC 0.50–0.65</td>
</tr>
<tr>
<td><strong>DETERIORATING</strong></td>
<td>MAC 0.50–0.65 AND 4-week momentum &lt; −0.05</td>
</tr>
<tr>
<td><strong>STRETCHED</strong></td>
<td>MAC 0.35–0.50</td>
</tr>
<tr>
<td><strong>CRITICAL</strong></td>
<td>MAC &lt; 0.35</td>
</tr>
</tbody>
</table>
<h3 id="momentum-calculation">9.2 Momentum Calculation</h3>
<p>The momentum module computes rate-of-change over three horizons:</p>
<p><span class="math display">\[\Delta_{\tau} = \text{MAC}_{t} -
\text{MAC}_{t-\tau}\]</span></p>
<p>where <span class="math inline">\(\tau \in \{1\text{w}, 2\text{w},
4\text{w}\}\)</span>.</p>
<p><strong>Trend direction classification:</strong> | 4-week momentum |
Trend | |—————–|——-| | &lt; −0.10 | Rapidly declining | | &lt; −0.03 |
Declining | | &gt; +0.05 | Improving | | Otherwise | Stable |</p>
<h3 id="deteriorating-status">9.3 DETERIORATING Status</h3>
<p>The <strong>DETERIORATING</strong> status is the key addition. It
fires when: - MAC is in the 0.50–0.65 range (CAUTIOUS on a level basis)
- But has declined by more than 0.05 over 4 weeks</p>
<p>This captures the critical moment when buffers are thinning rapidly —
often the last window for proactive risk reduction before a crisis
materialises.</p>
<h3 id="recommended-actions">9.4 Recommended Actions</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>COMFORTABLE</td>
<td>Maintain strategic allocation</td>
</tr>
<tr>
<td>CAUTIOUS</td>
<td>Review portfolio risk, prepare contingencies</td>
</tr>
<tr>
<td>DETERIORATING</td>
<td>Reduce equity beta, increase cash buffer</td>
</tr>
<tr>
<td>STRETCHED</td>
<td>Defensive positioning, hedge tail risk</td>
</tr>
<tr>
<td>CRITICAL</td>
<td>Maximum defence, preserve capital</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="predictive-analytics">10. Predictive Analytics</h2>
<h3 id="monte-carlo-simulation">10.1 Monte Carlo Simulation</h3>
<p>The Monte Carlo module simulates how shocks propagate under different
MAC regimes:</p>
<p><strong>Regime-dependent transmission coefficients:</strong></p>
<table>
<thead>
<tr>
<th>Regime</th>
<th>Direct Impact</th>
<th>Spillover</th>
<th>Amplification</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ample (MAC &gt; 0.65)</td>
<td>0.30</td>
<td>0.10</td>
<td>1.0×</td>
</tr>
<tr>
<td>Thin (0.50–0.65)</td>
<td>0.50</td>
<td>0.25</td>
<td>1.5×</td>
</tr>
<tr>
<td>Stretched (0.35–0.50)</td>
<td>0.70</td>
<td>0.45</td>
<td>2.5×</td>
</tr>
<tr>
<td>Breach (&lt; 0.35)</td>
<td>0.90</td>
<td>0.70</td>
<td><strong>4.0×</strong></td>
</tr>
</tbody>
</table>
<p>A 2-sigma liquidity shock under Ample conditions produces ~30% direct
impact with minimal spillover. The same shock under Breach conditions
produces ~90% direct impact with 70% spillover to other pillars,
amplified 4× — a qualitatively different dynamic that justifies
regime-aware risk management.</p>
<h3 id="shock-propagation-model">10.2 Shock Propagation Model</h3>
<p>The propagation module models multi-period cascades with an
interaction matrix that captures how stress in each pillar transmits to
others:</p>
<p><strong>Key transmission channels:</strong> - Positioning → Liquidity
(coefficient: 0.60): forced selling depletes liquidity - Positioning →
Volatility (coefficient: 0.50): deleveraging spikes vol - Liquidity →
Contagion (coefficient: 0.60): funding stress spreads globally -
Contagion → Liquidity (coefficient: 0.50): global stress tightens
funding - Policy → All pillars (negative coefficients): intervention
dampens stress</p>
<p><strong>Non-linear threshold effects</strong> accelerate transmission
when pillar scores breach critical levels: | Pillar | Threshold |
Acceleration | |——–|———–|————-| | Liquidity | 0.30 | 2.0× | |
Positioning | 0.25 | 2.5× | | Volatility | 0.20 | 1.8× | | Contagion |
0.30 | 2.2× |</p>
<h3 id="blind-backtesting">10.3 Blind Backtesting</h3>
<p>The blind backtesting module addresses the key critique of historical
backtests: <strong>lookahead bias</strong>. Standard backtests know the
outcome and may unconsciously be tuned to match. The blind backtest:</p>
<ol type="1">
<li>Only uses data that was available at each historical date</li>
<li>Makes predictions <em>before</em> outcomes are known</li>
<li>Compares predictions to actual outcomes via a pre-specified
protocol</li>
</ol>
<p>This produces a more realistic assessment of how the framework would
have performed in real time. The module tracks pre-event data
availability (e.g., SOFR not available before 2018, EMBI proxy not
available before 1998) and restricts the indicator set accordingly.</p>
<hr />
<h2 id="data-architecture-and-sources">11. Data Architecture and
Sources</h2>
<h3 id="primary-data-sources-modern-era">11.1 Primary Data Sources
(Modern Era)</h3>
<table>
<thead>
<tr>
<th>Source</th>
<th>Series Count</th>
<th>Coverage</th>
<th>Update Frequency</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FRED</strong> (Federal Reserve)</td>
<td>30+</td>
<td>1913–present</td>
<td>Daily/weekly</td>
</tr>
<tr>
<td><strong>CFTC COT</strong></td>
<td>5–10</td>
<td>1986–present</td>
<td>Weekly (Tuesdays)</td>
</tr>
<tr>
<td><strong>ETF Data</strong> (yfinance)</td>
<td>~15</td>
<td>2004–present</td>
<td>Daily</td>
</tr>
<tr>
<td><strong>BIS</strong></td>
<td>3–5</td>
<td>1999–present</td>
<td>Quarterly</td>
</tr>
<tr>
<td><strong>IMF</strong></td>
<td>2–3</td>
<td>1980–present</td>
<td>Monthly/quarterly</td>
</tr>
<tr>
<td><strong>ECB</strong></td>
<td>2–3</td>
<td>1999–present</td>
<td>Daily</td>
</tr>
</tbody>
</table>
<h3 id="fred-series-used">11.2 FRED Series Used</h3>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 14%" />
<col style="width: 19%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th>Series ID</th>
<th>Name</th>
<th>Pillar</th>
<th>Available From</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOFR</td>
<td>Secured Overnight Financing Rate</td>
<td>Liquidity</td>
<td>2018</td>
</tr>
<tr>
<td>IORB</td>
<td>Interest on Reserve Balances</td>
<td>Liquidity</td>
<td>2021</td>
</tr>
<tr>
<td>IOER</td>
<td>Interest on Excess Reserves</td>
<td>Liquidity</td>
<td>2008</td>
</tr>
<tr>
<td>TEDRATE</td>
<td>TED Spread</td>
<td>Liquidity</td>
<td>1986</td>
</tr>
<tr>
<td>DFF</td>
<td>Federal Funds Effective Rate</td>
<td>Liquidity, Policy</td>
<td>1954</td>
</tr>
<tr>
<td>DCPF3M</td>
<td>3-Month Commercial Paper Rate</td>
<td>Liquidity</td>
<td>1997</td>
</tr>
<tr>
<td>DTB3</td>
<td>3-Month Treasury Bill Rate</td>
<td>Liquidity</td>
<td>1954</td>
</tr>
<tr>
<td>BAMLC0A0CM</td>
<td>ICE BofA IG Corporate OAS</td>
<td>Valuation</td>
<td>1997</td>
</tr>
<tr>
<td>BAMLH0A0HYM2</td>
<td>ICE BofA HY Corporate OAS</td>
<td>Valuation</td>
<td>1997</td>
</tr>
<tr>
<td>DGS10</td>
<td>10-Year Treasury Constant Maturity</td>
<td>Valuation</td>
<td>1962</td>
</tr>
<tr>
<td>DGS2</td>
<td>2-Year Treasury Constant Maturity</td>
<td>Valuation, Policy</td>
<td>1976</td>
</tr>
<tr>
<td>AAA</td>
<td>Moody’s Aaa Corporate Bond Yield</td>
<td>Valuation</td>
<td>1919</td>
</tr>
<tr>
<td>BAA</td>
<td>Moody’s Baa Corporate Bond Yield</td>
<td>Valuation</td>
<td>1919</td>
</tr>
<tr>
<td>BAA10Y</td>
<td>Moody’s Baa–10Y Treasury Spread</td>
<td>Contagion</td>
<td>1919</td>
</tr>
<tr>
<td>VIXCLS</td>
<td>CBOE VIX</td>
<td>Volatility</td>
<td>1990</td>
</tr>
<tr>
<td>VXOCLS</td>
<td>CBOE VXO</td>
<td>Volatility</td>
<td>1986</td>
</tr>
<tr>
<td>NASDAQCOM</td>
<td>NASDAQ Composite</td>
<td>Volatility (RV)</td>
<td>1971</td>
</tr>
<tr>
<td>WALCL</td>
<td>Fed Total Assets</td>
<td>Policy</td>
<td>2002</td>
</tr>
<tr>
<td>BOGMBASE</td>
<td>Monetary Base</td>
<td>Policy</td>
<td>1918</td>
</tr>
<tr>
<td>INTDSRUSM193N</td>
<td>Fed Discount Rate</td>
<td>Policy</td>
<td>1913</td>
</tr>
<tr>
<td>GDPA</td>
<td>Annual GDP</td>
<td>Policy, Positioning</td>
<td>1929</td>
</tr>
<tr>
<td>IRLTLT01USM156N</td>
<td>Long-term Govt Bond Yield</td>
<td>Valuation</td>
<td>1920</td>
</tr>
<tr>
<td>DRTSCIS</td>
<td>SLOOS C&amp;I Standards (Small)</td>
<td>Private Credit</td>
<td>~1990</td>
</tr>
<tr>
<td>DRISCFS</td>
<td>SLOOS Spreads (Small)</td>
<td>Private Credit</td>
<td>~1990</td>
</tr>
<tr>
<td>BOGZ1FL623069503Q</td>
<td>HF Leveraged Loan Holdings</td>
<td>Private Credit</td>
<td>~2000</td>
</tr>
<tr>
<td>DTWEXBGS</td>
<td>Trade Weighted Dollar</td>
<td>Contagion</td>
<td>1973</td>
</tr>
<tr>
<td>BAMLEMCBPIOAS</td>
<td>ICE BofA EM OAS</td>
<td>Contagion</td>
<td>1998</td>
</tr>
</tbody>
</table>
<h3 id="data-quality-and-caching">11.3 Data Quality and Caching</h3>
<p>The <code>FREDClient</code> implements: - <strong>Prefetch
mode:</strong> all series loaded in a single batch for a date range,
reducing API calls from ~30 per date to 1 per backtest - <strong>Local
caching:</strong> series cached in <code>data/fred_cache/</code> to
avoid redundant downloads - <strong>Backtest mode:</strong> once
prefetched, the client serves data from memory without API calls -
<strong>Validation:</strong> a <code>--validate</code> flag checks
cached data coverage before running backtests</p>
<hr />
<h2 id="historical-proxy-chains-19071997">12. Historical Proxy Chains
(1907–1997)</h2>
<h3 id="era-definitions">12.1 Era Definitions</h3>
<p>The framework defines 10 structural eras based on breaks in data
availability and market structure:</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 24%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>Era</th>
<th>Period</th>
<th>Key Characteristic</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-Fed</td>
<td>1907–1913</td>
<td>No central bank; gold standard</td>
</tr>
<tr>
<td>Early Fed / WWI</td>
<td>1913–1919</td>
<td>Fed opens; wartime controls</td>
</tr>
<tr>
<td>Interwar / Depression</td>
<td>1920–1934</td>
<td>Moody’s credit data begins</td>
</tr>
<tr>
<td>New Deal / WWII</td>
<td>1934–1954</td>
<td>T-Bills issued; SEC created</td>
</tr>
<tr>
<td>Post-War / Bretton Woods</td>
<td>1954–1971</td>
<td>Fed Funds daily; modern Treasury market</td>
</tr>
<tr>
<td>Post-Bretton Woods</td>
<td>1971–1990</td>
<td>Floating rates; NASDAQ realised vol</td>
</tr>
<tr>
<td>Modern (early)</td>
<td>1990–1997</td>
<td>VIX introduced</td>
</tr>
<tr>
<td>Modern (middle)</td>
<td>1997–2006</td>
<td>TED spread; ICE BofA indices</td>
</tr>
<tr>
<td>Modern (pre-SOFR)</td>
<td>2006–2018</td>
<td>Full data; LIBOR-OIS; SVXY</td>
</tr>
<tr>
<td>Modern (SOFR)</td>
<td>2018–present</td>
<td>Full instrumentation</td>
</tr>
</tbody>
</table>
<h3 id="pillar-data-availability-by-era">12.2 Pillar Data Availability
by Era</h3>
<table>
<thead>
<tr>
<th>Era</th>
<th>Liq</th>
<th>Val</th>
<th>Vol</th>
<th>Pol</th>
<th>Pos</th>
<th>Cnt</th>
<th>PvtCr</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-Fed (1907–1913)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗*</td>
<td>✗</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Early Fed (1913–1919)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Interwar (1920–1934)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>New Deal / WWII (1934–1954)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Post-War (1954–1971)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Post-Bretton Woods (1971–1990)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Modern (1990–2006)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✗</td>
</tr>
<tr>
<td>Modern (2006+)</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
</tbody>
</table>
<p>* Pre-Fed policy receives a default score of 0.25 (no lender of last
resort) rather than being excluded entirely, reflecting the structural
absence of a central bank as a genuine risk factor.</p>
<h3 id="proxy-chain-detail">12.3 Proxy Chain Detail</h3>
<p><strong>Indicator Proxy Chain (earliest available → modern
native):</strong></p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 20%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Indicator</th>
<th>Pre-1919 Proxy</th>
<th>1919–1986 Proxy</th>
<th>1986–1997 Proxy</th>
<th>Native Series</th>
</tr>
</thead>
<tbody>
<tr>
<td>VIX</td>
<td>Schwert vol × 1.3 VRP (from 1802)</td>
<td>NASDAQ RV × 1.2 VRP (from 1971)</td>
<td>VXO (from 1986)</td>
<td>VIXCLS (from 1990)</td>
</tr>
<tr>
<td>HY OAS</td>
<td>Railroad bond spread (from 1857)</td>
<td>(Baa−Aaa) × 4.5 (from 1919)</td>
<td>Same</td>
<td>BAMLH0A0HYM2 (from 1997)</td>
</tr>
<tr>
<td>IG OAS</td>
<td>Railroad bond spread</td>
<td>Baa−DGS10−40bp (from 1919)</td>
<td>Same</td>
<td>BAMLC0A0CM (from 1997)</td>
</tr>
<tr>
<td>SOFR–IORB</td>
<td>Call money−govt rate (from 1890)</td>
<td>FF−TB3MS (from 1954)</td>
<td>TED spread (from 1986)</td>
<td>SOFR−IORB (from 2018)</td>
</tr>
<tr>
<td>CP–Treasury</td>
<td>CP rate−govt rate (NBER, from 1890)</td>
<td>Same series extended</td>
<td>DCPF3M−DTB3</td>
<td>Same</td>
</tr>
<tr>
<td>Policy room</td>
<td>N/A (no Fed)</td>
<td>Discount rate (from 1913)</td>
<td>Fed Funds (from 1954)</td>
<td>DFF</td>
</tr>
<tr>
<td>B/S to GDP</td>
<td>N/A</td>
<td>Monetary base / GDP (from 1918)</td>
<td>Same</td>
<td>WALCL/GDP (from 2002)</td>
</tr>
<tr>
<td>Positioning</td>
<td>N/A</td>
<td>Margin debt / GDP (from 1918)</td>
<td>CFTC COT (from 1986)</td>
<td>Same</td>
</tr>
<tr>
<td>Contagion</td>
<td>GBP/USD ÷ gold parity (BoE, from 1791)</td>
<td>Baa−10Y spread (from 1919)</td>
<td>Same</td>
<td>BAA10Y / G-SIB CDS</td>
</tr>
</tbody>
</table>
<h3 id="era-specific-threshold-overrides">12.4 Era-Specific Threshold
Overrides</h3>
<p>Pre-1971 markets had fundamentally different structures:</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 25%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Parameter</th>
<th>Modern Default</th>
<th>Pre-Fed (1907–1913)</th>
<th>Early Fed (1913–1919)</th>
<th>Interwar (1920–1934)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Liq spread breach</td>
<td>—</td>
<td>200 bps</td>
<td>150 bps</td>
<td>100 bps</td>
</tr>
<tr>
<td>IG OAS breach (high)</td>
<td>400 bps</td>
<td>600 bps</td>
<td>500 bps</td>
<td>500 bps</td>
</tr>
<tr>
<td>HY OAS breach (high)</td>
<td>1,000 bps</td>
<td>1,500 bps</td>
<td>1,400 bps</td>
<td>1,400 bps</td>
</tr>
<tr>
<td>VIX breach (high)</td>
<td>~40</td>
<td>50</td>
<td>50</td>
<td>45</td>
</tr>
<tr>
<td>Policy room breach</td>
<td>25 bps</td>
<td>N/A (no Fed)</td>
<td>50 bps</td>
<td>40 bps</td>
</tr>
</tbody>
</table>
<p><strong>Rationale:</strong> Call money rates routinely spiked to
100%+ pre-Fed (the Panic of 1907 saw 125% intraday). Railroad bond
spreads were structurally 2–3× wider than modern corporate spreads.
Schwert volatility estimates are structurally higher than VIX (different
construction: realised vol vs. implied vol). Without threshold
adjustments, the framework would produce wall-to-wall breach signals for
the entire pre-1971 period.</p>
<h3 id="default-scores">12.5 Default Scores</h3>
<p>When a pillar has no data available for an era, a context-appropriate
default is used:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 28%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Pillar</th>
<th>Default</th>
<th>Special Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td>Positioning</td>
<td>0.50 (neutral)</td>
<td>Margin debt available from 1918</td>
</tr>
<tr>
<td>Private Credit</td>
<td>0.52 (slightly cautious)</td>
<td>—</td>
</tr>
<tr>
<td>Policy</td>
<td>0.35 (cautious)</td>
<td>Pre-1913: 0.25 (no central bank); 1913–1934: 0.35 (early Fed)</td>
</tr>
<tr>
<td>Contagion</td>
<td>0.50 (neutral)</td>
<td>GBP/USD parity deviation available from 1791</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="calibration-methodology">13. Calibration Methodology</h2>
<h3 id="motivation-1">13.1 Motivation</h3>
<p>Raw MAC scores systematically overshoot expected crisis severity
ranges by 20–25%. Three sources of upward bias:</p>
<ol type="1">
<li>Not all indicators breach simultaneously even during severe
crises</li>
<li>Pillars with limited data contribute neutral scores, pulling the
composite up</li>
<li>The 0–1 scoring scale compresses non-crisis observations into
0.60–0.90</li>
</ol>
<h3 id="calibration-factor-derivation">13.2 Calibration Factor
Derivation</h3>
<p>The calibration factor <span class="math inline">\(\alpha\)</span>
was derived via grid search (step 0.01) over the range [0.50, 1.00],
minimising mean absolute error against expected MAC score midpoints for
the 14 modern scenarios (1998–2025):</p>
<p><span class="math display">\[\alpha^* = \arg\min_{\alpha} \frac{1}{N}
\sum_{i=1}^{N} \left| \alpha \cdot \text{MAC}_{\text{raw}}^{(i)} -
\text{MAC}_{\text{expected}}^{(i)} \right|\]</span></p>
<p><strong>Result:</strong> <span class="math inline">\(\alpha^* =
0.78\)</span></p>
<h3 id="leave-one-out-cross-validation">13.3 Leave-One-Out
Cross-Validation</h3>
<p>To test stability, LOOCV holds out each scenario in turn:</p>
<p><span class="math display">\[\alpha_k^* = \arg\min_{\alpha}
\frac{1}{N-1} \sum_{i \neq k} \left| \alpha \cdot
\text{MAC}_{\text{raw}}^{(i)} - \text{MAC}_{\text{expected}}^{(i)}
\right|\]</span></p>
<p>The mean, standard deviation, and range of <span
class="math inline">\(\alpha_k^*\)</span> across holdout folds quantify
calibration stability. A stability score of 1.0 indicates perfect
consistency (all holdout factors identical); lower values indicate
dependence on specific scenarios.</p>
<h3 id="threshold-sensitivity-analysis">13.4 Threshold Sensitivity
Analysis</h3>
<p>The calibration module tests robustness by perturbing all thresholds
by ±10% and ±20%:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 21%" />
<col style="width: 32%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Perturbation</th>
<th>Pass Rate</th>
<th>MAC Score Change</th>
<th>Stability</th>
</tr>
</thead>
<tbody>
<tr>
<td>±10%</td>
<td>High % of scenarios still passing</td>
<td>Small changes</td>
<td>Near-stable</td>
</tr>
<tr>
<td>±20%</td>
<td>Moderate %</td>
<td>More variation</td>
<td>Reduced</td>
</tr>
</tbody>
</table>
<p>This demonstrates that the framework is not fragile to small
threshold mis-specifications.</p>
<h3 id="empirical-threshold-distribution">13.5 Empirical Threshold
Distribution</h3>
<p>Stress regime thresholds were empirically derived from the 1971–2025
backtest distribution:</p>
<table>
<thead>
<tr>
<th>Regime</th>
<th>Target % of Observations</th>
<th>Score Percentile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Comfortable</td>
<td>~45%</td>
<td>0–45th</td>
</tr>
<tr>
<td>Cautious</td>
<td>~30%</td>
<td>45th–75th</td>
</tr>
<tr>
<td>Stretched</td>
<td>~18%</td>
<td>75th–93rd</td>
</tr>
<tr>
<td>Critical</td>
<td>~7%</td>
<td>93rd+</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="backtest-design-six-methodological-improvements">14. Backtest
Design: Six Methodological Improvements</h2>
<p>The current backtesting methodology incorporates six cumulative
improvements that raised the true positive rate from <strong>26.7% to
75.6%</strong>:</p>
<h3 id="fix-a-exclude-missing-pillars-from-composite">Fix A — Exclude
Missing Pillars from Composite</h3>
<p>When a pillar has no underlying indicator data (e.g., SLOOS
unavailable before 1990, or positioning without CFTC data), the pillar
is excluded from the weighted average rather than defaulting to 0.5. A
<code>has_data</code> dictionary tracks real data availability per
pillar per date. This prevents neutral scores from diluting genuine
stress signals.</p>
<p><strong>Impact:</strong> Eliminated the systematic upward bias from
neutral-default pillars during pre-2006 periods.</p>
<h3 id="fix-b-wire-up-contagion-proxy-via-baa10y">Fix B — Wire Up
Contagion Proxy via BAA10Y</h3>
<p>The contagion pillar, previously frozen at its default score, now
uses Moody’s Baa–10Y Treasury spread (<code>BAA10Y</code>) as a proxy
for financial sector credit stress. This spread captures systemic
banking and corporate stress (available from 1919). It closely tracks
G-SIB CDS spreads during the overlap period (2006+).</p>
<p><strong>Impact:</strong> Contagion signals now fire correctly during
GFC (2008), European sovereign crisis (2011), and other crises with
global banking stress.</p>
<h3 id="fix-c-range-based-valuation-scoring">Fix C — Range-Based
Valuation Scoring</h3>
<p>Valuation indicators changed from one-sided to <strong>two-sided
range-based</strong> scoring. Under the original approach, pre-GFC
compressed IG OAS (~60 bps in 2007) scored as “ample” (maximum buffer).
The two-sided approach correctly identifies both extremes as risky.</p>
<p><strong>Impact:</strong> Pre-GFC build-up period now correctly shows
deteriorating valuation buffer.</p>
<h3 id="fix-d-ml-optimised-weights-for-modern-era">Fix D — ML-Optimised
Weights for Modern Era</h3>
<p>For dates from 2006 onwards, gradient-boosting-derived weights
replace equal weights. For pre-1971 periods, era-specific weights are
used.</p>
<p><strong>Impact:</strong> Positioning breaches now dominate the MAC
score when they occur, correctly flagging hedge failure risk.</p>
<h3 id="fix-e-era-aware-calibration-factor">Fix E — Era-Aware
Calibration Factor</h3>
<p>The calibration factor varies by era: 0.78 (post-2006), 0.90
(1971–2006), 1.00 (pre-1971). A single factor for all eras produced
excessive false positives pre-1971 (FPR &gt; 90%) because structurally
wider historical spreads already compress raw scores.</p>
<p><strong>Impact:</strong> Pre-1971 false positive rate reduced from
&gt;90% to an acceptable level while maintaining crisis detection.</p>
<h3 id="fix-f-momentum-enhanced-warning-detection">Fix F —
Momentum-Enhanced Warning Detection</h3>
<p>Crisis warnings now combine level-based detection (MAC &lt; 0.50)
with momentum-based detection (MAC &lt; 0.60 AND 4-week momentum &lt;
−0.04). This captures the important signal of rapid deterioration while
MAC levels are borderline.</p>
<p><strong>Impact:</strong> Identifies crises where MAC levels are
marginal but declining rapidly — the 2018 Q4 selloff and 2015 China
devaluation were detected via momentum that would have been missed on
level alone.</p>
<hr />
<h2 id="empirical-results-19072025">15. Empirical Results
(1907–2025)</h2>
<h3 id="summary-performance">15.1 Summary Performance</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Total weekly observations</td>
<td><strong>6,158</strong></td>
</tr>
<tr>
<td>Time span</td>
<td><strong>1907–2025 (117 years)</strong></td>
</tr>
<tr>
<td>Total crisis events tested</td>
<td><strong>41</strong></td>
</tr>
<tr>
<td>True positive rate</td>
<td><strong>75.6%</strong> (31/41)</td>
</tr>
<tr>
<td>Improvement over v1 baseline</td>
<td>+49 pp (from 26.7%)</td>
</tr>
<tr>
<td>Data sources</td>
<td>6 external databases, 30+ FRED series</td>
</tr>
<tr>
<td>Scoring method</td>
<td>Range-based + ML-weighted + momentum</td>
</tr>
</tbody>
</table>
<h3 id="crisis-detection-by-era">15.2 Crisis Detection by Era</h3>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 22%" />
<col style="width: 28%" />
<col style="width: 14%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Era</th>
<th>Crises</th>
<th>Detected</th>
<th>TPR</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-Fed (1907–1913)</td>
<td>2</td>
<td>1</td>
<td>50%</td>
<td>Panic of 1907 captured; 1910–11 too mild</td>
</tr>
<tr>
<td>Early Fed / WWI (1913–1919)</td>
<td>1</td>
<td>1</td>
<td>100%</td>
<td>1914 exchange closure</td>
</tr>
<tr>
<td>Interwar / Depression (1920–1934)</td>
<td>4</td>
<td>3</td>
<td>75%</td>
<td>1929 crash, bank panics, 1933 holiday</td>
</tr>
<tr>
<td>New Deal / WWII (1934–1954)</td>
<td>1</td>
<td>1</td>
<td>100%</td>
<td>1937–38 recession</td>
</tr>
<tr>
<td>Post-War / Bretton Woods (1954–1971)</td>
<td>5</td>
<td>3</td>
<td>60%</td>
<td>Kennedy Slide, Credit Crunch 1966, Penn Central</td>
</tr>
<tr>
<td>Post-Bretton Woods (1971–1990)</td>
<td>8</td>
<td>6</td>
<td>75%</td>
<td>Nixon Shock through Black Monday</td>
</tr>
<tr>
<td>Modern (1990–2025)</td>
<td>20</td>
<td>16</td>
<td>80%</td>
<td>LTCM through Yen Carry Unwind</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>41</strong></td>
<td><strong>31</strong></td>
<td><strong>75.6%</strong></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="major-crisis-mac-scores-selected">15.3 Major Crisis MAC Scores
(Selected)</h3>
<table>
<thead>
<tr>
<th>Crisis</th>
<th>Date</th>
<th>Expected MAC</th>
<th>Actual Result</th>
<th>Treasury Hedge</th>
</tr>
</thead>
<tbody>
<tr>
<td>Panic of 1907</td>
<td>1907-10-14</td>
<td>0.15–0.35</td>
<td>Detected</td>
<td>N/A (pre-modern)</td>
</tr>
<tr>
<td>1929 Crash</td>
<td>1929-10-24</td>
<td>0.15–0.35</td>
<td>Detected</td>
<td>N/A</td>
</tr>
<tr>
<td>Banking Panic 1930–31</td>
<td>1930-10-01</td>
<td>0.10–0.25</td>
<td>Detected</td>
<td>N/A</td>
</tr>
<tr>
<td>Black Monday 1987</td>
<td>1987-10-19</td>
<td>0.30–0.45</td>
<td>Detected</td>
<td>Worked</td>
</tr>
<tr>
<td>LTCM Crisis</td>
<td>1998-09-23</td>
<td>0.20–0.40</td>
<td>Detected</td>
<td>Worked</td>
</tr>
<tr>
<td>Lehman / GFC</td>
<td>2008-09-15</td>
<td>0.10–0.30</td>
<td>Detected</td>
<td>Worked initially</td>
</tr>
<tr>
<td>COVID-19</td>
<td>2020-03-16</td>
<td>0.10–0.25</td>
<td>Detected</td>
<td><strong>Failed</strong></td>
</tr>
<tr>
<td>April 2025 Tariffs</td>
<td>2025-04-02</td>
<td>—</td>
<td>Detected</td>
<td><strong>Failed</strong></td>
</tr>
</tbody>
</table>
<h3 id="key-empirical-findings">15.4 Key Empirical Findings</h3>
<p><strong>Finding 1: Positioning Breach → Treasury Hedge
Failure</strong></p>
<p>In the modern sub-sample (2006–2025), every scenario where the
positioning pillar breached (score &lt; 0.20) coincided with Treasury
hedge failure. The mechanism: when basis trades are unwinding or
speculative positioning is extreme, the forced selling of Treasury
futures eliminates the safe-haven function.</p>
<p><strong>Finding 2: Multi-Pillar Advantage</strong></p>
<ul>
<li><em>VIX alone</em> missed the 2019 Repo Spike (VIX ~15, normal) and
provided no positioning signal for the 2025 Tariff shock</li>
<li><em>Credit spreads alone</em> were compressed to historic lows in
pre-GFC 2007, producing false comfort</li>
<li><em>The MAC framework</em> correctly flagged pre-GFC complacency
(via two-sided valuation scoring) and identified positioning-driven
hedge failures</li>
</ul>
<p><strong>Finding 3: Era-Aware Calibration is Essential</strong></p>
<p>A single calibration factor produces false positive rates exceeding
90% for pre-1971 data because Schwert volatility (~45% annualised) and
NBER railroad spreads are structurally wider than their modern
equivalents. The era-specific sliding scale resolves this.</p>
<p><strong>Finding 4: Momentum Detection Adds ~10% to TPR</strong></p>
<p>Crisis categories CAUTIOUS-but-declining (MAC 0.50–0.60, declining
&gt;0.04/month) were missed by pure level detection but captured by the
momentum signal. This adds approximately 10 percentage points to the
true positive rate.</p>
<h3 id="data-quality-assessment">15.5 Data Quality Assessment</h3>
<table>
<thead>
<tr>
<th>Quality Tier</th>
<th>Date Range</th>
<th>Characteristics</th>
</tr>
</thead>
<tbody>
<tr>
<td>Excellent</td>
<td>2018–present</td>
<td>All 7 pillars, daily frequency, SOFR-IORB</td>
</tr>
<tr>
<td>Good</td>
<td>2011–2018</td>
<td>All pillars, LIBOR-OIS, SVXY</td>
</tr>
<tr>
<td>Fair</td>
<td>1990–2011</td>
<td>VIX available, Moody’s proxies for credit</td>
</tr>
<tr>
<td>Poor</td>
<td>1907–1990</td>
<td>Monthly NBER/Schwert, proxy chains</td>
</tr>
</tbody>
</table>
<p><strong>Pre-1971 caveats:</strong> 1. Monthly vs. weekly granularity
(NBER and Schwert data are monthly, interpolated to weekly) 2. Proxy
estimation error in railroad-to-corporate credit spread scaling 3.
Structural regime differences (gold standard, no modern central banking)
4. Positioning data absence before 1918 (relies on default or margin
debt proxy)</p>
<hr />
<h2 id="multi-country-extension">16. Multi-Country Extension</h2>
<h3 id="overview">16.1 Overview</h3>
<p>The framework extends to non-US economies via the
<code>MultiCountryMAC</code> module. Each country profile defines: -
Country-specific threshold adjustments - Available indicators and data
sources - Structural factors affecting buffer interpretation</p>
<p>Currently supported: US, EU, CN (China), JP, UK.</p>
<h3 id="comparative-analysis">16.2 Comparative Analysis</h3>
<p>Cross-country MAC comparison identifies: - <strong>Divergence
score</strong> (0–1): how far apart regional MAC scores are -
<strong>Lead/lag region:</strong> which region shows stress first -
<strong>Contagion direction:</strong> US → region, region → US,
bidirectional, or decoupled - <strong>Key differentiators:</strong>
which pillars drive the divergence</p>
<h3 id="contagion-pathway-analysis">16.3 Contagion Pathway Analysis</h3>
<p>The framework analyses stress transmission between regions through: -
Banking channels (G-SIB interconnectedness) - Currency channels
(cross-currency basis) - Equity channels (correlation and spillover) -
Estimated transmission lag (days)</p>
<hr />
<h2 id="limitations-and-design-choices">17. Limitations and Design
Choices</h2>
<h3 id="known-limitations">17.1 Known Limitations</h3>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th>Limitation</th>
<th>Impact</th>
<th>Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-1971 data quality</td>
<td>Monthly proxy data with limited cross-validation</td>
<td>Era-specific thresholds and calibration; quality tier labelling</td>
</tr>
<tr>
<td>Positioning pillar gaps</td>
<td>No CFTC data before 1986; margin debt is a crude leverage proxy</td>
<td>Default scoring; margin debt recovers some signal from 1918</td>
</tr>
<tr>
<td>Private credit opacity</td>
<td>SLOOS quarterly; BDC data from ~2004</td>
<td>Multiple indirect proxies; leading indicator design</td>
</tr>
<tr>
<td>Calibration factor stability</td>
<td>0.78 derived from 14 scenarios; periodic re-estimation needed</td>
<td>LOOCV stability testing; sensitivity analysis</td>
</tr>
<tr>
<td>Contagion proxy simplicity</td>
<td>BAA10Y captures credit stress but not cross-border funding
dynamics</td>
<td>Supplemented with EUR/USD basis and EMBI when available</td>
</tr>
<tr>
<td>Small ML training set</td>
<td>14 scenarios is small for ML</td>
<td>Shallow trees (depth 2), LOOCV, explicit regularisation</td>
</tr>
<tr>
<td>Exogenous shock blind spot</td>
<td>Framework measures absorption capacity, not shock probability</td>
<td>Monte Carlo module for shock scenario analysis</td>
</tr>
</tbody>
</table>
<h3 id="deliberate-design-choices">17.2 Deliberate Design Choices</h3>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Decision</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>7 pillars (not fewer)</strong></td>
<td>Each captures distinct, orthogonal risk dimension; removing any
pillar loses crisis detection</td>
</tr>
<tr>
<td><strong>Equal weights as default</strong></td>
<td>Interpretable, robust baseline; ML weights activated only when
demonstrably superior</td>
</tr>
<tr>
<td><strong>Regime break at MAC &lt; 0.20</strong></td>
<td>Acknowledges model limits; exponential extrapolation would be
misleading</td>
</tr>
<tr>
<td><strong>0.78 calibration factor</strong></td>
<td>Grid-search optimised + LOOCV validated; applied per-era</td>
</tr>
<tr>
<td><strong>Two-sided valuation scoring</strong></td>
<td>Critical fix: prevents compressed spreads from appearing “safe”</td>
</tr>
<tr>
<td><strong>No deep learning</strong></td>
<td>Small training set (14 scenarios); gradient boosting is optimal for
tabular, small-N</td>
</tr>
<tr>
<td><strong>Explicit interaction features</strong></td>
<td>Theory-driven pairs outperform letting the model discover
interactions</td>
</tr>
<tr>
<td><strong>Exclude missing pillars</strong></td>
<td>Neutral filler (0.5) dilutes real signals; better to use fewer,
accurate pillars</td>
</tr>
<tr>
<td><strong>Monthly proxies interpolated</strong></td>
<td>Weekly backtest frequency maintained; interpolation introduces
smoothing, not bias</td>
</tr>
<tr>
<td><strong>VRP adjustment for historical vol</strong></td>
<td>Schwert (realised) must be scaled to compare with VIX (implied)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="pillar-independence-and-dependence-analysis">18. Pillar
Independence and Dependence Analysis</h2>
<h3 id="motivation-2">18.1 Motivation</h3>
<p>Section 17.2 states that each pillar “captures distinct, orthogonal
risk dimensions.” This is a structural claim underpinning the entire MAC
framework: if pillars are redundant, their separate weighting overstates
the information content and inflates model confidence.</p>
<p>Pearson correlation — the only dependence measure previously used
(hardcoded in <code>PILLAR_CORRELATIONS</code> for Monte Carlo
simulation) — captures only <strong>linear, monotone</strong>
relationships. Financial risk factors commonly exhibit:</p>
<ul>
<li><strong>Non-linear co-movement</strong> (e.g., liquidity and
contagion decouple in calm markets but co-spike in crises)</li>
<li><strong>Tail dependence</strong> (shared extreme behaviour invisible
to Pearson at the margin level)</li>
<li><strong>Non-monotone functional relationships</strong> (e.g., policy
tightening cycles reduce volatility up to a point, then amplify it)</li>
</ul>
<p>Three complementary metrics address these blind spots.</p>
<p>The following diagram shows the complete analysis pipeline and its
downstream connections:</p>
<pre class="mermaid"><code>flowchart TD
    subgraph Input[&quot;Input: Pillar Score History&quot;]
        PS[&quot;7 Pillar Score&lt;br/&gt;Time Series&quot;]
    end

    subgraph Pairwise[&quot;Pairwise Analysis (21 pairs)&quot;]
        MI[&quot;Mutual Information&lt;br/&gt;I(X;Y) — bits&quot;]
        NMI[&quot;Normalised MI&lt;br/&gt;NMI ∈ [0,1]&quot;]
        HSIC[&quot;HSIC (RBF kernel)&lt;br/&gt;median heuristic σ&quot;]
        PERM[&quot;Permutation Test&lt;br/&gt;1000 permutations&quot;]
        MIC[&quot;MIC Grid Search&lt;br/&gt;B(n) = n^0.6&quot;]
        PEAR[&quot;Pearson ρ&lt;br/&gt;(linear baseline)&quot;]
    end

    subgraph System[&quot;System-Level Redundancy&quot;]
        TC[&quot;Watanabe Total&lt;br/&gt;Correlation C (bits)&quot;]
        DTC[&quot;Han Dual Total&lt;br/&gt;Correlation D (bits)&quot;]
    end

    subgraph Decisions[&quot;Downstream Decisions&quot;]
        D1[&quot;Decorrelation&lt;br/&gt;Candidates&quot;]
        D2[&quot;Interaction Feature&lt;br/&gt;Validation&quot;]
        D3[&quot;Monte Carlo&lt;br/&gt;Correlation Update&quot;]
    end

    PS --&gt; MI
    PS --&gt; HSIC
    PS --&gt; MIC
    PS --&gt; PEAR
    MI --&gt; NMI
    HSIC --&gt; PERM
    PS --&gt; TC
    PS --&gt; DTC

    NMI --&gt;|&quot;NMI &gt; 0.2&quot;| D1
    PERM --&gt;|&quot;p &lt; 0.05&quot;| D1
    PERM --&gt;|&quot;p &gt; 0.05&quot;| D2
    PEAR --&gt;|&quot;gap &gt; 0.15&lt;br/&gt;from hardcoded&quot;| D3
    MIC --&gt;|&quot;MIC ≫ |ρ|&quot;| D3

    D1 --&gt;|&quot;Apply OLS residual&lt;br/&gt;extraction&quot;| DEC[&quot;Decorrelated&lt;br/&gt;Pillar Scores&quot;]
    D2 --&gt;|&quot;Remove noise&lt;br/&gt;features&quot;| MLW[&quot;ML Weight&lt;br/&gt;Optimiser&quot;]
    D3 --&gt;|&quot;Update Cholesky&lt;br/&gt;decomposition&quot;| MC[&quot;Monte Carlo&lt;br/&gt;Simulator&quot;]</code></pre>
<p><em>Figure 18.1. Cross-pillar dependence analysis pipeline. Three
metrics (MI, HSIC, MIC) plus Pearson correlation feed into three
downstream decisions: decorrelation, interaction feature validation, and
Monte Carlo correlation update.</em></p>
<h3 id="metrics">18.2 Metrics</h3>
<h4 id="mutual-information-mi">18.2.1 Mutual Information (MI)</h4>
<p><span class="math display">\[I(X; Y) = \sum_{x,y} p(x,y) \log_2
\frac{p(x,y)}{p(x)\,p(y)}\]</span></p>
<p>MI is a model-free, information-theoretic measure of total
statistical dependence. It equals zero <strong>if and only if</strong> X
and Y are independent (not merely uncorrelated). The implementation uses
equiprobable binning with <span class="math inline">\(k = \lceil N^{1/3}
\rceil\)</span> bins per dimension.</p>
<p><strong>Normalised MI</strong> (NMI) is reported as:</p>
<p><span class="math display">\[\text{NMI} = \frac{2 \cdot I(X;Y)}{H(X)
+ H(Y)} \in [0, 1]\]</span></p>
<p>providing a scale-invariant comparator across pillar pairs.</p>
<h4 id="hilbertschmidt-independence-criterion-hsic">18.2.2
Hilbert–Schmidt Independence Criterion (HSIC)</h4>
<p><span class="math display">\[\text{HSIC}(X, Y) = \frac{1}{(n-1)^2}
\operatorname{tr}(K_X H K_Y H)\]</span></p>
<p>where <span class="math inline">\(K_X, K_Y\)</span> are RBF kernel
matrices and <span class="math inline">\(H = I -
\frac{1}{n}\mathbf{1}\mathbf{1}^\top\)</span> is the centering
matrix.</p>
<p>HSIC operates in a reproducing kernel Hilbert space (RKHS) and is
particularly powerful for detecting:</p>
<ul>
<li>Complex non-linear dependencies invisible to MI’s discrete
binning</li>
<li>Subtle distributional differences between paired variables</li>
</ul>
<p>Bandwidth selection uses the <strong>median heuristic</strong>: <span
class="math inline">\(\sigma = \text{median}(\|x_i - x_j\|)\)</span>.
Statistical significance is assessed via a <strong>permutation
test</strong> (default 1,000 permutations), yielding a calibrated
p-value without distributional assumptions.</p>
<h4 id="maximal-information-coefficient-mic">18.2.3 Maximal Information
Coefficient (MIC)</h4>
<p>MIC searches over a family of 2-D grids at varying resolution,
computing the normalised MI on each grid and reporting the maximum:</p>
<p><span class="math display">\[\text{MIC}(X, Y) = \max_{n_x \cdot n_y
&lt; B(n)} \frac{I_{n_x, n_y}(X; Y)}{\log_2 \min(n_x, n_y)}\]</span></p>
<p>where <span class="math inline">\(B(n) = n^{0.6}\)</span> controls
the exploration budget. MIC is <strong>equitable</strong>: it assigns
similar scores to relationships of the same noise level regardless of
functional form, making it ideal for exploring whether pillar pairs have
<em>any</em> functional relationship — linear, quadratic, periodic, or
otherwise.</p>
<h3 id="system-level-redundancy">18.3 System-Level Redundancy</h3>
<p>Beyond pairwise metrics, two multivariate measures quantify total
system redundancy:</p>
<p><strong>Watanabe Total Correlation</strong> (TC):</p>
<p><span class="math display">\[C(X_1, \ldots, X_p) = \sum_{i=1}^{p}
H(X_i) - H(X_1, \ldots, X_p)\]</span></p>
<p>TC is zero if and only if all pillars are jointly independent. A high
TC indicates that the 7-pillar system contains redundant information —
the effective dimensionality is lower than 7.</p>
<p><strong>Han Dual Total Correlation</strong> (DTC):</p>
<p><span class="math display">\[D(X_1, \ldots, X_p) = H(X_1, \ldots,
X_p) - \sum_{i=1}^{p} H(X_i | X_{\neg i})\]</span></p>
<p>DTC captures <strong>synergistic</strong> (higher-order) interactions
that exist beyond pairwise dependencies — e.g., three pillars jointly
predicting a crisis that no pair alone can predict.</p>
<h3 id="prior-knowledge-and-hypotheses">18.4 Prior Knowledge and
Hypotheses</h3>
<p>The framework’s existing architecture encodes implicit dependence
assumptions:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Pillar Pair</th>
<th>Hardcoded Pearson (Monte Carlo)</th>
<th>Theoretical Basis</th>
</tr>
</thead>
<tbody>
<tr>
<td>Liquidity – Contagion</td>
<td>0.70</td>
<td>Funding stress amplifies cross-market transmission</td>
</tr>
<tr>
<td>Liquidity – Volatility</td>
<td>0.65</td>
<td>Illiquidity spikes coincide with vol expansion</td>
</tr>
<tr>
<td>Volatility – Positioning</td>
<td>0.60</td>
<td>Crowded trades unwind in high-vol regimes</td>
</tr>
<tr>
<td>Positioning – Contagion</td>
<td>0.50</td>
<td>Herding drives contagion pathways</td>
</tr>
<tr>
<td>Liquidity – Positioning</td>
<td>0.55</td>
<td>Margin-driven deleveraging</td>
</tr>
<tr>
<td>Valuation – Volatility</td>
<td>0.45</td>
<td>Overvaluation fragility</td>
</tr>
<tr>
<td>Contagion – Valuation</td>
<td>0.40</td>
<td>Spread compression in complacency</td>
</tr>
<tr>
<td>Policy – Volatility</td>
<td>−0.20</td>
<td>Accommodative policy dampens vol (pre-crisis)</td>
</tr>
</tbody>
</table>
<p>The dependence analysis module (<code>grri_mac.mac.dependence</code>)
validates these against empirical data using all three non-linear
metrics, and flags pairs where:</p>
<ol type="1">
<li><strong>Hardcoded Pearson diverges</strong> from empirical Pearson
by &gt; 0.15</li>
<li><strong>NMI or MIC significantly exceeds</strong> what Pearson would
predict (non-linear dependence)</li>
<li><strong>HSIC permutation test</strong> rejects independence (p &lt;
0.05) where the pair was assumed approximately independent</li>
</ol>
<h3 id="implementation">18.5 Implementation</h3>
<p>The analysis is implemented in
<code>grri_mac/mac/dependence.py</code> with the following
architecture:</p>
<pre><code>PillarDependenceAnalyzer
├── full_analysis(pillar_history)     → DependenceReport
│   ├── compute_mi(x, y)             → (MI bits, NMI)
│   ├── compute_hsic(x, y)           → (HSIC stat, p-value)
│   ├── compute_mic(x, y)            → MIC ∈ [0,1]
│   ├── compute_total_correlation()  → TC bits
│   └── compute_dual_total_correlation() → DTC bits
├── rolling_analysis(history, window) → [DependenceReport]
└── compare_to_hardcoded(history)     → comparison dict</code></pre>
<p><strong>Key design decisions:</strong></p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th>Decision</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pure NumPy (no minepy)</td>
<td>Zero external dependencies beyond numpy; MIC computed via grid
search</td>
</tr>
<tr>
<td>Permutation test for HSIC</td>
<td>Avoids asymptotic approximation assumptions; valid for any sample
size</td>
</tr>
<tr>
<td>Median heuristic bandwidth</td>
<td>Adaptive, parameter-free; standard in kernel methods literature</td>
</tr>
<tr>
<td>Rolling window mode</td>
<td>Detects crisis-regime dependence shifts (e.g., “all correlations go
to 1”)</td>
</tr>
<tr>
<td>Comparison to PILLAR_CORRELATIONS</td>
<td>Direct audit of Monte Carlo simulation assumptions</td>
</tr>
</tbody>
</table>
<h3 id="implications-for-weight-optimisation">18.6 Implications for
Weight Optimisation</h3>
<p>The decorrelation pipeline follows a detect–decorrelate–validate
loop:</p>
<pre class="mermaid"><code>flowchart LR
    subgraph Detect[&quot;1. Detect Dependence&quot;]
        PAIR[&quot;All 21 pillar&lt;br/&gt;pairs&quot;]
        MI_D[&quot;MI / NMI&quot;]
        HSIC_D[&quot;HSIC + permutation&lt;br/&gt;p-value&quot;]
        FLAG[&quot;Flag pairs:&lt;br/&gt;NMI&gt;0.2 AND p&lt;0.05&quot;]
    end

    subgraph Decorrelate[&quot;2. Decorrelate&quot;]
        OLS[&quot;Rolling OLS&lt;br/&gt;y = β₀ + β₁x + ε&quot;]
        RES[&quot;Extract residual ε&quot;]
        STD[&quot;Standardise:&lt;br/&gt;z = ε / σ(ε)&quot;]
        EWMA[&quot;EWMA smooth&lt;br/&gt;(halflife=12)&quot;]
    end

    subgraph Validate[&quot;3. Validate&quot;]
        RE_MI[&quot;Re-compute MI&lt;br/&gt;on residuals&quot;]
        CHECK{&quot;NMI &lt; 0.10?&quot;}
        PASS[&quot;✓ Pass: use&lt;br/&gt;decorrelated scores&quot;]
        ITER[&quot;↻ Add more&lt;br/&gt;regressors&quot;]
    end

    PAIR --&gt; MI_D
    PAIR --&gt; HSIC_D
    MI_D --&gt; FLAG
    HSIC_D --&gt; FLAG
    FLAG --&gt; OLS
    OLS --&gt; RES
    RES --&gt; STD
    STD --&gt; EWMA
    EWMA --&gt; RE_MI
    RE_MI --&gt; CHECK
    CHECK --&gt;|&quot;Yes&quot;| PASS
    CHECK --&gt;|&quot;No&quot;| ITER
    ITER --&gt; OLS</code></pre>
<p><em>Figure 18.2. Decorrelation pipeline for redundant pillar pairs.
Flagged pairs undergo OLS residual extraction, standardisation, and EWMA
smoothing, then are re-tested for residual dependence.</em></p>
<p>Dependence analysis results feed into three downstream decisions:</p>
<ol type="1">
<li><p><strong>Decorrelation candidates</strong>: Pillar pairs with NMI
&gt; 0.2 AND HSIC p &lt; 0.05 are candidates for the same
residual-extraction procedure currently applied only to private credit
(via <code>PrivateCreditDecorrelator</code>). This prevents the ML
weight optimiser from double-counting correlated information.</p></li>
<li><p><strong>Interaction feature validation</strong>: The
theory-driven <code>INTERACTION_PAIRS</code> in
<code>ml_weights.py</code> can be validated against HSIC significance —
pairs that are statistically independent should not receive interaction
features, as these would introduce pure noise into the gradient boosting
model.</p></li>
<li><p><strong>Monte Carlo correlation update</strong>: Where empirical
Pearson deviates from hardcoded values by &gt; 0.15, the
<code>PILLAR_CORRELATIONS</code> dict should be updated and the Cholesky
decomposition in the Monte Carlo simulator re-computed. Non-linear
dependence detected by HSIC/MIC but missed by Pearson suggests that the
Gaussian copula assumption in the simulator may need upgrading to a
t-copula or vine copula.</p></li>
</ol>
<h3 id="validation">18.7 Validation</h3>
<p>The module is tested with 44 unit tests covering:</p>
<ul>
<li>Entropy computation (uniform, degenerate, joint distributions)</li>
<li>MI bounds and monotonicity (independent → ~0, identical → H(X),
linear → high)</li>
<li>HSIC significance (independent → p &gt; 0.01, linear/nonlinear → p
&lt; 0.05)</li>
<li>MIC equitability (linear and sin(x) relationships both
detected)</li>
<li>RBF kernel properties (symmetry, PSD, unit diagonal)</li>
<li>Total correlation ordering (independent &lt; redundant)</li>
<li>Full analyzer pipeline (pair counts, symmetry, format_report)</li>
<li>Rolling window analysis</li>
<li>Error handling (single pillar, length mismatch)</li>
</ul>
<hr />
<h2 id="references">19. References</h2>
<h3 id="academic-literature">Academic Literature</h3>
<ol type="1">
<li><p><strong>Schwert, G.W.</strong> (1989). “Why Does Stock Market
Volatility Change Over Time?” <em>Journal of Finance</em>, 44(5),
1115–1153. — Source of 1802–1987 volatility estimates.</p></li>
<li><p><strong>Breiman, L.</strong> (2001). “Random Forests.”
<em>Machine Learning</em>, 45(1), 5–32. — Foundational ensemble method
used in ML weight optimiser.</p></li>
<li><p><strong>Friedman, J.H.</strong> (2001). “Greedy Function
Approximation: A Gradient Boosting Machine.” <em>Annals of
Statistics</em>, 29(5), 1189–1232. — Gradient boosting method used for
weight optimisation.</p></li>
<li><p><strong>Shiller, R.J.</strong> — Yale Online Data. S&amp;P
Composite Stock Price Index, CAPE, CPI, long-term interest rates (from
1871).</p></li>
<li><p><strong>Kraskov, A., Stögbauer, H., &amp; Grassberger,
P.</strong> (2004). “Estimating Mutual Information.” <em>Physical Review
E</em>, 69(6), 066138. — k-NN MI estimator.</p></li>
<li><p><strong>Gretton, A., Bousquet, O., Smola, A., &amp; Schölkopf,
B.</strong> (2005). “Measuring Statistical Dependence with
Hilbert–Schmidt Norms.” <em>Algorithmic Learning Theory</em>, LNCS 3734,
63–77. — HSIC.</p></li>
<li><p><strong>Reshef, D.N., Reshef, Y.A., Finucane, H.K., et
al.</strong> (2011). “Detecting Novel Associations in Large Data Sets.”
<em>Science</em>, 334(6062), 1518–1524. — Maximal Information
Coefficient.</p></li>
<li><p><strong>Watanabe, S.</strong> (1960). “Information Theoretical
Analysis of Multivariate Correlation.” <em>IBM Journal of Research and
Development</em>, 4(1), 66–82. — Total correlation.</p></li>
</ol>
<h3 id="federal-reserve-research">Federal Reserve Research</h3>
<ol start="9" type="1">
<li><p><strong>Federal Reserve Board</strong> (March 2024). “Quantifying
Treasury Cash-Futures Basis Trades.” <em>FEDS Notes</em>. — Basis trade
size estimates ($260B–$574B in late 2023).</p></li>
<li><p><strong>Federal Reserve Board</strong> (August 2023). “Recent
Developments in Hedge Funds’ Treasury Futures and Repo Positions.”
<em>FEDS Notes</em>. — Identifies basis trade as financial stability
vulnerability.</p></li>
<li><p><strong>Office of Financial Research</strong> (April 2021).
“Hedge Funds and the Treasury Cash-Futures Disconnect.” <em>OFR Working
Paper 21-01</em>. — Documents basis trade unwind contribution to March
2020 Treasury dysfunction.</p></li>
</ol>
<h3 id="data-sources">Data Sources</h3>
<ol start="12" type="1">
<li><p><strong>FRED</strong> (Federal Reserve Economic Data). Federal
Reserve Bank of St. Louis. https://fred.stlouisfed.org/</p></li>
<li><p><strong>NBER Macrohistory Database</strong>. National Bureau of
Economic Research.
https://www.nber.org/research/data/nber-macrohistory-database — Interest
rates, gold stocks, commercial paper rates (from 1857).</p></li>
<li><p><strong>Bank of England Research Database</strong>. Bank of
England. — GBP/USD exchange rate (from 1791), Bank Rate (from
1694).</p></li>
<li><p><strong>MeasuringWorth</strong>. https://www.measuringworth.com/
— US nominal GDP (from 1790).</p></li>
<li><p><strong>FINRA / NYSE</strong>. — Margin debt statistics (from
1918).</p></li>
<li><p><strong>CFTC Commitments of Traders (COT)</strong>. Commodity
Futures Trading Commission. — Treasury futures positioning (from
1986).</p></li>
</ol>
<hr />
<p><em>Framework Version: 5.1 (7-Pillar, Extended 1907–2025, with
Dependence Analysis)</em> <em>Calibration Factor: 0.78 (era-aware)</em>
<em>Weight Method: ML-optimised (2006+), era-specific (pre-1971), equal
(default)</em> <em>Dependence Analysis: MI (Kraskov), HSIC (Gretton),
MIC (Reshef), TC (Watanabe)</em> <em>Data Sources: FRED, NBER
Macrohistory, Schwert (1989), Shiller (Yale), Bank of England,
MeasuringWorth, FINRA</em> <em>Document Author: FGF Research</em>
<em>Last Updated: February 2026</em></p>
</body>
</html>
